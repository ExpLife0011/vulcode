





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://assets-cdn.github.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-hqbuBb0QOOmiWgl8a1V1N5q6TI/G0A2hVt/lCFYafR+fYsuXeRUcsdcb/yUyVEHYXktmUXl0Mx9s/BOUNZVq4w==" rel="stylesheet" href="https://assets-cdn.github.com/assets/frameworks-23c9e7262eee71bc6f67f6950190a162.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-Dz6UOi9t3mC0y7H781oNdigCIAV0ZQ3eP+nYT5IakV5DsGtrezIVff2haLv+dK3gXfTWkTgQEbwZDibwNH82WQ==" rel="stylesheet" href="https://assets-cdn.github.com/assets/github-f33d51cdc14ddc36995b2e42a6259a0b.css" />
  
  
  <link crossorigin="anonymous" media="all" integrity="sha512-cCY9KKeDzfGd+snVDZwcOIrTjK+JAFW4FR1c4OGJo1Z2QZNbAGVD6JlcnHL19LBcdByWHVxwrAPwigT/v/DWyQ==" rel="stylesheet" href="https://assets-cdn.github.com/assets/site-7472e7b4603d4095447d49d428375ab8.css" />
  

  <meta name="viewport" content="width=device-width">
  
  <title>Fix bug #72135 - don&#39;t create strings with lengths outside int range · php/php-src@0da8b8b · GitHub</title>
    <meta name="description" content="GitHub is where people build software. More than 27 million people use GitHub to discover, fork, and contribute to over 80 million projects.">
  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta property="og:image" content="https://avatars1.githubusercontent.com/u/155000?s=200&amp;v=4" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="Fix bug #72135 - don&#39;t create strings with lengths outside int range · php/php-src@0da8b8b" /><meta property="og:url" content="https://github.com/php/php-src/commit/0da8b8b801f9276359262f1ef8274c7812d3dfda" /><meta property="og:updated_time" content="1463380011" />

  <link rel="assets" href="https://assets-cdn.github.com/">
  
  <meta name="pjax-timeout" content="1000">
  
  <meta name="request-id" content="C2F3:9DDD:D0F09:142E59:5AFBD37E" data-pjax-transient>


  

  <meta name="selected-link" value="repo_commits" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
    <meta name="google-analytics" content="UA-3769691-2">

<meta name="octolytics-host" content="collector.githubapp.com" /><meta name="octolytics-app-id" content="github" /><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event" /><meta name="octolytics-dimension-request_id" content="C2F3:9DDD:D0F09:142E59:5AFBD37E" /><meta name="octolytics-dimension-region_edge" content="sea" /><meta name="octolytics-dimension-region_render" content="iad" />
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/commit/show" data-pjax-transient="true" />




  <meta class="js-ga-set" name="dimension1" content="Logged Out">


  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="ODU2ZjRmMmQ4Yzg4OTU4N2ZiNjdjZDE0ZDJhOTljNGQ2NjZjNjAyOTFkYTQyN2ExZTFlN2NlMzM2NzM3NTYwZXx7InJlbW90ZV9hZGRyZXNzIjoiMTA3LjE4NC4xNTcuMzQiLCJyZXF1ZXN0X2lkIjoiQzJGMzo5REREOkQwRjA5OjE0MkU1OTo1QUZCRDM3RSIsInRpbWVzdGFtcCI6MTUyNjQ1MzExOCwiaG9zdCI6ImdpdGh1Yi5jb20ifQ==">

    <meta name="enabled-features" content="UNIVERSE_BANNER,FREE_TRIALS,MARKETPLACE_INSIGHTS,MARKETPLACE_SELF_SERVE,MARKETPLACE_INSIGHTS_CONVERSION_PERCENTAGES">

  <meta name="html-safe-nonce" content="889cdf4e837856d1b5336e0a959cc7e918fa8a9f">

  <meta http-equiv="x-pjax-version" content="3a94a771ed4e5e109a7d6636a8cf1782">
  

      <link href="/php/php-src/commit/0da8b8b801f9276359262f1ef8274c7812d3dfda.diff" rel="alternate" type="text/plain+diff" data-pjax-transient="true" />
  <link href="/php/php-src/commit/0da8b8b801f9276359262f1ef8274c7812d3dfda.patch" rel="alternate" type="text/plain+patch" data-pjax-transient="true" />

  <meta name="diff-view" content="unified" data-pjax-transient>
  <link href="https://github.com/php/php-src/commits/0da8b8b801f9276359262f1ef8274c7812d3dfda.atom" rel="alternate" title="Recent Commits to php-src:0da8b8b801f9276359262f1ef8274c7812d3dfda" type="application/atom+xml">

  <meta name="description" content="php-src - The PHP Interpreter">
  <meta name="go-import" content="github.com/php/php-src git https://github.com/php/php-src.git">

  <meta name="octolytics-dimension-user_id" content="25158" /><meta name="octolytics-dimension-user_login" content="php" /><meta name="octolytics-dimension-repository_id" content="1903522" /><meta name="octolytics-dimension-repository_nwo" content="php/php-src" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="1903522" /><meta name="octolytics-dimension-repository_network_root_nwo" content="php/php-src" /><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false" />




  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



<link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-out env-production">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="px-2 py-4 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        <header class="Header header-logged-out  position-relative f4 py-3" role="banner">
  <div class="container-lg d-flex px-3">
    <div class="d-flex flex-justify-between flex-items-center">
      <a class="header-logo-invertocat my-0" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
        <svg height="32" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
      </a>

    </div>

    <div class="HeaderMenu HeaderMenu--bright d-flex flex-justify-between flex-auto">
        <nav class="mt-0">
          <ul class="d-flex list-style-none">
              <li class="ml-2">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:features" data-selected-links="/features /features/project-management /features/code-review /features/project-management /features/integrations /features" href="/features">
                  Features
</a>              </li>
              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/security /business/customers /business" href="/business">
                  Business
</a>              </li>

              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="/explore">
                  Explore
</a>              </li>

              <li class="ml-4">
                    <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:marketplace" data-selected-links=" /marketplace" href="/marketplace">
                      Marketplace
</a>              </li>
              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:pricing" data-selected-links="/pricing /pricing/developer /pricing/team /pricing/business-hosted /pricing/business-enterprise /pricing" href="/pricing">
                  Pricing
</a>              </li>
          </ul>
        </nav>

      <div class="d-flex">
          <div class="d-lg-flex flex-items-center mr-3">
            <div class="header-search scoped-search site-scoped-search js-site-search" role="search">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" data-scope-type="Repository" data-scope-id="1903522" data-scoped-search-url="/php/php-src/search" data-unscoped-search-url="/search" action="/php/php-src/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
    <label class="form-control header-search-wrapper  js-chromeless-input-container">
          <a class="header-search-scope no-underline" href="/php/php-src/commit/0da8b8b801f9276359262f1ef8274c7812d3dfda">This repository</a>
      <input type="text"
        class="form-control header-search-input  js-site-search-focus js-site-search-field is-clearable"
        data-hotkey="s,/"
        name="q"
        value=""
        placeholder="Search"
        aria-label="Search this repository"
        data-unscoped-placeholder="Search GitHub"
        data-scoped-placeholder="Search"
        autocapitalize="off"
        >
        <input type="hidden" class="js-site-search-type-field" name="type" >
    </label>
</form></div>

          </div>

        <span class="d-inline-block">
            <div class="HeaderNavlink px-0 py-2 m-0">
              <a class="text-bold text-white no-underline" href="/login?return_to=%2Fphp%2Fphp-src%2Fcommit%2F0da8b8b801f9276359262f1ef8274c7812d3dfda%3Fw%3D1.patch" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
                <span class="text-gray">or</span>
                <a class="text-bold text-white no-underline" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
            </div>
        </span>
      </div>
    </div>
  </div>
</header>

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">
</div>



  <div role="main" class="application-main ">
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container >
      




  



  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">
  <li>
      <a href="/login?return_to=%2Fphp%2Fphp-src"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
    Watch
  </a>
  <a class="social-count" href="/php/php-src/watchers"
     aria-label="1468 users are watching this repository">
    1,468
  </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fphp%2Fphp-src"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <svg class="octicon octicon-star" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"/></svg>
    Star
  </a>

    <a class="social-count js-social-count" href="/php/php-src/stargazers"
      aria-label="17659 users starred this repository">
      17,659
    </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fphp%2Fphp-src"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <svg class="octicon octicon-repo-forked" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
        Fork
      </a>

    <a href="/php/php-src/network" class="social-count"
       aria-label="4809 users forked this repository">
      4,809
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" href="/php">php</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="/php/php-src">php-src</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
     role="navigation"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /php/php-src" href="/php/php-src">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>


  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /php/php-src/pulls" href="/php/php-src/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">154</span>
      <meta itemprop="position" content="3">
</a>  </span>




  <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse /php/php-src/pulse" href="/php/php-src/pulse">
    <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
    Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
  <a href="/php/php-src/commit/0da8b8b801f9276359262f1ef8274c7812d3dfda" class="d-none js-permalink-shortcut" data-hotkey="y">Permalink</a>


  

  
<div class="commit full-commit px-2 pt-2 ">
  <a href="/php/php-src/tree/0da8b8b801f9276359262f1ef8274c7812d3dfda" class="btn btn-outline float-right" title="Browse the repository at this point in the history" rel="nofollow">Browse files</a>

    <p class="commit-title">
      Fix bug #72135 - don't create strings with lengths outside int range
    </p>


  <div class="commit-branches">
  <include-fragment src="/php/php-src/branch_commits/0da8b8b801f9276359262f1ef8274c7812d3dfda">
    <svg class="octicon octicon-git-branch" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
    <ul class="branches-list">
      <li class="loading">Loading branch information<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></li>
    </ul>
</include-fragment></div>


  <div class="commit-meta clearfix p-2 no-wrap d-flex flex-items-center">
    
<div class="AvatarStack flex-self-start ">
  <div class="AvatarStack-body" aria-label="smalyshev">

        <a class="avatar" data-skip-pjax="true" data-hovercard-user-id="155000" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/smalyshev">
          <img height="20" width="20" alt="@smalyshev" src="https://avatars2.githubusercontent.com/u/155000?s=60&amp;v=4" />
</a>  </div>
</div>

    <div class="flex-auto">
      
      <a href="/php/php-src/commits?author=smalyshev"
     class="commit-author tooltipped tooltipped-s user-mention"
     aria-label="View all commits by smalyshev">smalyshev</a>


  committed
  <relative-time datetime="2016-05-16T06:26:51Z">May 16, 2016</relative-time>

      

    </div>
    <div>
      <span class="sha-block" data-pjax>
        1 parent
          
          <a class="sha" data-hotkey="p" href="/php/php-src/commit/41fc3c76e97a36ff3b505da7d704ca17bb171fdf">41fc3c7</a>
      </span>
      <span class="sha-block">commit <span class="sha user-select-contain">0da8b8b801f9276359262f1ef8274c7812d3dfda</span></span>
    </div>
  </div>
</div>




      <a name="diff-stat"></a>
      <div id="toc" class="details-collapse table-of-contents js-details-container Details">
  <div class="BtnGroup float-right" data-ga-load="Diff, view, Viewed Unified Diff">
  <a class="btn btn-sm selected BtnGroup-item" href="https://github.com/php/php-src/commit/0da8b8b801f9276359262f1ef8274c7812d3dfda?diff=unified&amp;w=1.patch">
    Unified
  </a>
  <a class="btn btn-sm BtnGroup-item" href="https://github.com/php/php-src/commit/0da8b8b801f9276359262f1ef8274c7812d3dfda?diff=split&amp;w=1.patch">
    Split
  </a>
</div>


  <div class="toc-diff-stats">
    <svg class="octicon octicon-diff" viewBox="0 0 13 16" version="1.1" width="13" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 7h2v1H6v2H5V8H3V7h2V5h1v2zm-3 6h5v-1H3v1zM7.5 2L11 5.5V15c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h6.5zM10 6L7 3H1v12h9V6zM8.5 0H3v1h5l4 4v8h1V4.5L8.5 0z"/></svg>
    Showing
    <button type="button" class="btn-link js-details-target" aria-expanded="false">
      1 changed file
    </button>
    with
    <strong>27 additions</strong>
    and <strong>23 deletions</strong>.
  </div>

  <ol class="content collapse js-transitionable">
    <li>
      <span class="diffstat float-right">
          <span class="text-green">
            +27
          </span>
          <span class="text-red">
            −23
          </span>
          <a href="#diff-d54e93201247cb5d840c86eb6b561b7e" class="tooltipped tooltipped-s" aria-label="50 lines changed">
            <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span>
          </a>
      </span>
      <svg title="modified" class="octicon octicon-diff-modified" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"/></svg>
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e">ext/standard/html.c</a>
    </li>
  </ol>
</div>

    <div id="files" class="diff-view ">

  <div class="js-diff-progressive-container">
    
<a name="diff-d54e93201247cb5d840c86eb6b561b7e"></a>
<div id="diff-0"
     class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           ">
  <div class="file-header js-file-header" data-path="ext/standard/html.c" data-short-path="d54e932" data-anchor="diff-d54e93201247cb5d840c86eb6b561b7e">
    <div class="file-actions">

        <span class="show-file-notes pt-1">
          <label>
            <input type="checkbox" checked="checked" class="js-toggle-file-notes">
            Show comments
          </label>
        </span>

          <a href="/php/php-src/blob/0da8b8b801f9276359262f1ef8274c7812d3dfda/ext/standard/html.c" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 0da8b8b ">View</a>


      <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true">
        <svg class="octicon octicon-chevron-down Details-content--shown" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z"/></svg>
        <svg class="octicon octicon-chevron-up Details-content--hidden" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z"/></svg>
      </button>
    </div>
    <div class="file-info">
        <span class="diffstat tooltipped tooltipped-e" aria-label="27 additions &amp; 23 deletions">50 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span></span>

      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e" class="link-gray-dark"
         title="ext/standard/html.c">ext/standard/html.c</a>

      
    </div>
  </div>
  <div class="js-file-content Details-content--shown">

        <div class="data highlight js-blob-wrapper" style="overflow-x: auto">
          <table class="diff-table tab-size  " data-tab-size="8">
            
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=163&amp;next_line_num_right=163&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7"
            data-left-range="1-162" data-right-range="1-162">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -163,7 +163,7 @@ static inline unsigned int get_next_char(</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL163" data-line-number="163"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR163" data-line-number="163"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 					<span class="pl-k">else</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL164" data-line-number="164"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR164" data-line-number="164"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 						<span class="pl-c1">MB_FAILURE</span>(pos, <span class="pl-c1">4</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL165" data-line-number="165"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR165" data-line-number="165"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL166" data-line-number="166"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">				</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR166" data-line-number="166"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL167" data-line-number="167"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR167" data-line-number="167"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				this_char = ((c &amp; <span class="pl-c1">0x07</span>) &lt;&lt; <span class="pl-c1">18</span>) | ((str[pos + <span class="pl-c1">1</span>] &amp; <span class="pl-c1">0x3f</span>) &lt;&lt; <span class="pl-c1">12</span>) | ((str[pos + <span class="pl-c1">2</span>] &amp; <span class="pl-c1">0x3f</span>) &lt;&lt; <span class="pl-c1">6</span>) | (str[pos + <span class="pl-c1">3</span>] &amp; <span class="pl-c1">0x3f</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL168" data-line-number="168"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR168" data-line-number="168"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				<span class="pl-k">if</span> (this_char &lt; <span class="pl-c1">0x10000</span> || this_char &gt; <span class="pl-c1">0x10FFFF</span>) { <span class="pl-c"><span class="pl-c">/*</span> non-shortest form or outside range <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL169" data-line-number="169"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR169" data-line-number="169"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 					<span class="pl-c1">MB_FAILURE</span>(pos, <span class="pl-c1">4</span>);</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="9">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=437&amp;next_line_num_right=437&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=169&amp;prev_line_num_right=169&amp;right_hunk_size=7"
            data-left-range="170-436" data-right-range="170-436">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -437,7 +437,7 @@ static enum entity_charset determine_charset(char *charset_hint TSRMLS_DC)</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL437" data-line-number="437"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR437" data-line-number="437"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL438" data-line-number="438"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR438" data-line-number="438"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">if</span> (charset_hint) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL439" data-line-number="439"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR439" data-line-number="439"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">int</span> found = <span class="pl-c1">0</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL440" data-line-number="440"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">		</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR440" data-line-number="440"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL441" data-line-number="441"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR441" data-line-number="441"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-c"><span class="pl-c">/*</span> now walk the charset map and look for the codeset <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL442" data-line-number="442"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR442" data-line-number="442"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">for</span> (i = <span class="pl-c1">0</span>; charset_map[i].<span class="pl-smi">codeset</span>; i++) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL443" data-line-number="443"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR443" data-line-number="443"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">if</span> (len == <span class="pl-c1">strlen</span>(charset_map[i].<span class="pl-smi">codeset</span>) &amp;&amp; <span class="pl-c1">strncasecmp</span>(charset_hint, charset_map[i].<span class="pl-smi">codeset</span>, len) == <span class="pl-c1">0</span>) {</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="18">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=545&amp;next_line_num_right=545&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=443&amp;prev_line_num_right=443&amp;right_hunk_size=7"
            data-left-range="444-544" data-right-range="444-544">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -545,7 +545,7 @@ static inline unsigned char unimap_bsearch(const uni_to_enc *table, unsigned cod</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL545" data-line-number="545"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR545" data-line-number="545"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> <span class="pl-c1">0</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL546" data-line-number="546"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR546" data-line-number="546"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL547" data-line-number="547"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR547" data-line-number="547"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	code_key = (<span class="pl-k">unsigned</span> <span class="pl-k">short</span>) code_key_a;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL548" data-line-number="548"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR548" data-line-number="548"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL549" data-line-number="549"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR549" data-line-number="549"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">while</span> (l &lt;= h) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL550" data-line-number="550"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR550" data-line-number="550"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		m = l + (h - l) / <span class="pl-c1">2</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL551" data-line-number="551"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR551" data-line-number="551"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (code_key &lt; m-&gt;<span class="pl-smi">un_code_point</span>)</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="27">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=571&amp;next_line_num_right=571&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=551&amp;prev_line_num_right=551&amp;right_hunk_size=7"
            data-left-range="552-570" data-right-range="552-570">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -571,7 +571,7 @@ static inline int map_from_unicode(unsigned code, enum entity_charset charset, u</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL571" data-line-number="571"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR571" data-line-number="571"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-c"><span class="pl-c">/*</span> identity mapping of code points to unicode <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL572" data-line-number="572"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR572" data-line-number="572"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (code &gt; <span class="pl-c1">0xFF</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL573" data-line-number="573"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR573" data-line-number="573"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">return</span> FAILURE;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL574" data-line-number="574"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		}<span class="x x-first x-last"> </span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR574" data-line-number="574"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL575" data-line-number="575"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR575" data-line-number="575"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		*res = code;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL576" data-line-number="576"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR576" data-line-number="576"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">break</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL577" data-line-number="577"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR577" data-line-number="577"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="36">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=590&amp;next_line_num_right=590&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=577&amp;prev_line_num_right=577&amp;right_hunk_size=7"
            data-left-range="578-589" data-right-range="578-589">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -590,7 +590,7 @@ static inline int map_from_unicode(unsigned code, enum entity_charset charset, u</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL590" data-line-number="590"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR590" data-line-number="590"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">return</span> FAILURE;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL591" data-line-number="591"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR591" data-line-number="591"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL592" data-line-number="592"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR592" data-line-number="592"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">break</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL593" data-line-number="593"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">		</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR593" data-line-number="593"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL594" data-line-number="594"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR594" data-line-number="594"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">case</span> cs_8859_15:</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL595" data-line-number="595"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR595" data-line-number="595"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (code &lt; <span class="pl-c1">0xA4</span> || (code &gt; <span class="pl-c1">0xBE</span> &amp;&amp; code &lt;= <span class="pl-c1">0xFF</span>)) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL596" data-line-number="596"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR596" data-line-number="596"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			*res = code;</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="45">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=634&amp;next_line_num_right=634&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=596&amp;prev_line_num_right=596&amp;right_hunk_size=7"
            data-left-range="597-633" data-right-range="597-633">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -634,7 +634,7 @@ static inline int map_from_unicode(unsigned code, enum entity_charset charset, u</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL634" data-line-number="634"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR634" data-line-number="634"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">case</span> cs_cp866:</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL635" data-line-number="635"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR635" data-line-number="635"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		table = unimap_cp866;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL636" data-line-number="636"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR636" data-line-number="636"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		table_size = <span class="pl-k">sizeof</span>(unimap_cp866) / <span class="pl-k">sizeof</span>(*unimap_cp866);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL637" data-line-number="637"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">		</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR637" data-line-number="637"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL638" data-line-number="638"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR638" data-line-number="638"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> table_over_7F:</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL639" data-line-number="639"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR639" data-line-number="639"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (code &lt;= <span class="pl-c1">0x7F</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL640" data-line-number="640"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR640" data-line-number="640"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			*res = code;</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="54">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=710&amp;next_line_num_right=710&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=640&amp;prev_line_num_right=640&amp;right_hunk_size=7"
            data-left-range="641-709" data-right-range="641-709">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -710,7 +710,7 @@ static inline int unicode_cp_is_allowed(unsigned uni_cp, int document_type)</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL710" data-line-number="710"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR710" data-line-number="710"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * Not sure this is the relevant part for HTML 5, though. I opted to</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL711" data-line-number="711"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR711" data-line-number="711"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * disallow the characters that would result in a parse error when</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL712" data-line-number="712"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR712" data-line-number="712"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * preprocessing of the input stream. See also section 8.1.3.</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL713" data-line-number="713"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 *<span class="x x-first x-last"> </span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR713" data-line-number="713"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL714" data-line-number="714"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR714" data-line-number="714"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * It&#39;s unclear if XHTML 1.0 allows C1 characters. I&#39;ll opt to apply to</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL715" data-line-number="715"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR715" data-line-number="715"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * XHTML 1.0 the same rules as for XML 1.0.</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL716" data-line-number="716"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR716" data-line-number="716"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * See &lt;http://cmsmcq.com/2007/C1.xml&gt;.</span></span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="63">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=774&amp;next_line_num_right=774&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=716&amp;prev_line_num_right=716&amp;right_hunk_size=7"
            data-left-range="717-773" data-right-range="717-773">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -774,7 +774,7 @@ static inline int numeric_entity_is_allowed(unsigned uni_cp, int document_type)</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL774" data-line-number="774"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR774" data-line-number="774"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">/*</span> {{{ process_numeric_entity</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL775" data-line-number="775"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR775" data-line-number="775"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c"> * Auxiliary function to traverse_for_entities.</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL776" data-line-number="776"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR776" data-line-number="776"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c"> * On input, *buf should point to the first character after # and on output, it&#39;s the last</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL777" data-line-number="777"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c"> * byte read, no matter if there was success or insuccess.<span class="x x-first x-last"> </span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR777" data-line-number="777"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * byte read, no matter if there was success or insuccess.</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL778" data-line-number="778"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR778" data-line-number="778"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c"> <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL779" data-line-number="779"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR779" data-line-number="779"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">static</span> <span class="pl-k">inline</span> <span class="pl-k">int</span> <span class="pl-en">process_numeric_entity</span>(<span class="pl-k">const</span> <span class="pl-k">char</span> **buf, <span class="pl-k">unsigned</span> *code_point)</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL780" data-line-number="780"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR780" data-line-number="780"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> {</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="72">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=784&amp;next_line_num_right=784&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=780&amp;prev_line_num_right=780&amp;right_hunk_size=7"
            data-left-range="781-783" data-right-range="781-783">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -784,7 +784,7 @@ static inline int process_numeric_entity(const char **buf, unsigned *code_point)</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL784" data-line-number="784"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR784" data-line-number="784"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL785" data-line-number="785"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR785" data-line-number="785"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">if</span> (hexadecimal &amp;&amp; (**buf != <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-cce">\0</span><span class="pl-pds">&#39;</span></span>))</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL786" data-line-number="786"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR786" data-line-number="786"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		(*buf)++;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL787" data-line-number="787"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">			</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR787" data-line-number="787"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL788" data-line-number="788"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR788" data-line-number="788"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c"><span class="pl-c">/*</span> strtol allows whitespace and other stuff in the beginning</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL789" data-line-number="789"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR789" data-line-number="789"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">		* we&#39;re not interested <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL790" data-line-number="790"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR790" data-line-number="790"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">if</span> ((hexadecimal &amp;&amp; !<span class="pl-c1">isxdigit</span>(**buf)) ||</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="81">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=969&amp;next_line_num_right=969&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=790&amp;prev_line_num_right=790&amp;right_hunk_size=7"
            data-left-range="791-968" data-right-range="791-968">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -969,7 +969,7 @@ static void traverse_for_entities(</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL969" data-line-number="969"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR969" data-line-number="969"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				<span class="pl-k">goto</span> invalid_code;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL970" data-line-number="970"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR970" data-line-number="970"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL971" data-line-number="971"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR971" data-line-number="971"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c"><span class="pl-c">/*</span> are we allowed to decode this entity in this document type?</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL972" data-line-number="972"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">			 * HTML 5 is the only that has a character that cannot be used in<span class="x x-first x-last"> </span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR972" data-line-number="972"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">			 * HTML 5 is the only that has a character that cannot be used in</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL973" data-line-number="973"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR973" data-line-number="973"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">			 * a numeric entity but is allowed literally (U+000D). The</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL974" data-line-number="974"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR974" data-line-number="974"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">			 * unoptimized version would be ... || !numeric_entity_is_allowed(code) <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL975" data-line-number="975"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR975" data-line-number="975"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">if</span> (!<span class="pl-c1">unicode_cp_is_allowed</span>(code, doctype) ||</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="90">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=9&amp;mode=100644&amp;next_line_num_left=996&amp;next_line_num_right=996&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=975&amp;prev_line_num_right=975&amp;right_hunk_size=9"
            data-left-range="976-995" data-right-range="976-995">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -996,9 +996,9 @@ static void traverse_for_entities(</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL996" data-line-number="996"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR996" data-line-number="996"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL997" data-line-number="997"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR997" data-line-number="997"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL998" data-line-number="998"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR998" data-line-number="998"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL999" data-line-number="999"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">		</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR999" data-line-number="999"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1000" data-line-number="1000"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1000" data-line-number="1000"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-c1">assert</span>(*next == <span class="pl-s"><span class="pl-pds">&#39;</span>;<span class="pl-pds">&#39;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1001" data-line-number="1001"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">		</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1001" data-line-number="1001"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1002" data-line-number="1002"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1002" data-line-number="1002"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (((code == <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-cce">\&#39;</span><span class="pl-pds">&#39;</span></span> &amp;&amp; !(flags &amp; ENT_HTML_QUOTE_SINGLE)) ||</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1003" data-line-number="1003"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1003" data-line-number="1003"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				(code == <span class="pl-s"><span class="pl-pds">&#39;</span>&quot;<span class="pl-pds">&#39;</span></span> &amp;&amp; !(flags &amp; ENT_HTML_QUOTE_DOUBLE)))</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1004" data-line-number="1004"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1004" data-line-number="1004"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				<span class="pl-c"><span class="pl-c">/*</span> &amp;&amp; code2 == &#39;\0&#39; always true for current maps <span class="pl-c">*/</span></span>)</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="102">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=1026&amp;next_line_num_right=1026&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1004&amp;prev_line_num_right=1004&amp;right_hunk_size=7"
            data-left-range="1005-1025" data-right-range="1005-1025">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1026,7 +1026,7 @@ static void traverse_for_entities(</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1026" data-line-number="1026"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1026" data-line-number="1026"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			*(q++) = *p;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1027" data-line-number="1027"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1027" data-line-number="1027"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1028" data-line-number="1028"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1028" data-line-number="1028"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1029" data-line-number="1029"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1029" data-line-number="1029"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1030" data-line-number="1030"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1030" data-line-number="1030"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	*q = <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-cce">\0</span><span class="pl-pds">&#39;</span></span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1031" data-line-number="1031"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1031" data-line-number="1031"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	*retlen = (<span class="pl-c1">size_t</span>)(q - ret);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1032" data-line-number="1032"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1032" data-line-number="1032"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="111">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=1066&amp;next_line_num_right=1066&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1032&amp;prev_line_num_right=1032&amp;right_hunk_size=7"
            data-left-range="1033-1065" data-right-range="1033-1065">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1066,7 +1066,7 @@ static entity_table_opt determine_entity_table(int all, int doctype)</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1066" data-line-number="1066"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1066" data-line-number="1066"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	entity_table_opt retval = {<span class="pl-c1">NULL</span>};</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1067" data-line-number="1067"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1067" data-line-number="1067"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1068" data-line-number="1068"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1068" data-line-number="1068"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c1">assert</span>(!(doctype == ENT_HTML_DOC_XML1 &amp;&amp; all));</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1069" data-line-number="1069"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1069" data-line-number="1069"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1070" data-line-number="1070"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1070" data-line-number="1070"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">if</span> (all) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1071" data-line-number="1071"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1071" data-line-number="1071"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		retval.<span class="pl-smi">ms_table</span> = (doctype == ENT_HTML_DOC_HTML5) ?</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1072" data-line-number="1072"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1072" data-line-number="1072"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			entity_ms_table_html5 : entity_ms_table_html4;</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="120">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=13&amp;mode=100644&amp;next_line_num_left=1111&amp;next_line_num_right=1111&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1072&amp;prev_line_num_right=1072&amp;right_hunk_size=13"
            data-left-range="1073-1110" data-right-range="1073-1110">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1111,13 +1111,13 @@ PHPAPI char *php_unescape_html_entities(unsigned char *old, size_t oldlen, size_</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1111" data-line-number="1111"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1111" data-line-number="1111"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">if</span> (retlen == <span class="pl-c1">0</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1112" data-line-number="1112"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1112" data-line-number="1112"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">goto</span> empty_source;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1113" data-line-number="1113"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1113" data-line-number="1113"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1114" data-line-number="1114"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1114" data-line-number="1114"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1115" data-line-number="1115"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1115" data-line-number="1115"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	inverse_map = <span class="pl-c1">unescape_inverse_map</span>(all, flags);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1116" data-line-number="1116"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1116" data-line-number="1116"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1117" data-line-number="1117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1117" data-line-number="1117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c"><span class="pl-c">/*</span> replace numeric entities <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1118" data-line-number="1118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1118" data-line-number="1118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c1">traverse_for_entities</span>(old, oldlen, ret, &amp;retlen, all, flags, inverse_map, charset);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1119" data-line-number="1119"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1119" data-line-number="1119"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1120" data-line-number="1120"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-empty_source:<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1120" data-line-number="1120"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+empty_source:</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1121" data-line-number="1121"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1121" data-line-number="1121"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	*newlen = retlen;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1122" data-line-number="1122"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1122" data-line-number="1122"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">return</span> ret;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1123" data-line-number="1123"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1123" data-line-number="1123"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="137">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=1141&amp;next_line_num_right=1141&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1123&amp;prev_line_num_right=1123&amp;right_hunk_size=7"
            data-left-range="1124-1140" data-right-range="1124-1140">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1141,7 +1141,7 @@ static inline void find_entity_for_char(</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1141" data-line-number="1141"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1141" data-line-number="1141"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1142" data-line-number="1142"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1142" data-line-number="1142"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">unsigned</span> stage1_idx = <span class="pl-c1">ENT_STAGE1_INDEX</span>(k);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1143" data-line-number="1143"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1143" data-line-number="1143"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">const</span> entity_stage3_row *c;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1144" data-line-number="1144"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1144" data-line-number="1144"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1145" data-line-number="1145"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1145" data-line-number="1145"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">if</span> (stage1_idx &gt; <span class="pl-c1">0x1D</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1146" data-line-number="1146"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1146" data-line-number="1146"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		*entity     = <span class="pl-c1">NULL</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1147" data-line-number="1147"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1147" data-line-number="1147"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		*entity_len = <span class="pl-c1">0</span>;</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="146">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=1162&amp;next_line_num_right=1162&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1147&amp;prev_line_num_right=1147&amp;right_hunk_size=7"
            data-left-range="1148-1161" data-right-range="1148-1161">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1162,7 +1162,7 @@ static inline void find_entity_for_char(</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1162" data-line-number="1162"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1162" data-line-number="1162"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (!(*cursor &lt; oldlen))</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1163" data-line-number="1163"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1163" data-line-number="1163"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">goto</span> no_suitable_2nd;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1164" data-line-number="1164"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1164" data-line-number="1164"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1165" data-line-number="1165"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		next_char = <span class="pl-c1">get_next_char</span>(charset, old, oldlen, cursor, &amp;status);<span class="x x-first x-last"> </span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1165" data-line-number="1165"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		next_char = <span class="pl-c1">get_next_char</span>(charset, old, oldlen, cursor, &amp;status);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1166" data-line-number="1166"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1166" data-line-number="1166"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1167" data-line-number="1167"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1167" data-line-number="1167"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (status == FAILURE)</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1168" data-line-number="1168"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1168" data-line-number="1168"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">goto</span> no_suitable_2nd;</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="155">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=1187&amp;next_line_num_right=1187&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1168&amp;prev_line_num_right=1168&amp;right_hunk_size=7"
            data-left-range="1169-1186" data-right-range="1169-1186">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1187,7 +1187,7 @@ static inline void find_entity_for_char(</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1187" data-line-number="1187"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1187" data-line-number="1187"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		*entity = (<span class="pl-k">const</span> <span class="pl-k">unsigned</span> <span class="pl-k">char</span> *)</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1188" data-line-number="1188"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1188" data-line-number="1188"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			c-&gt;<span class="pl-smi">data</span>.<span class="pl-smi">multicodepoint_table</span>[<span class="pl-c1">0</span>].<span class="pl-smi">leading_entry</span>.<span class="pl-smi">default_entity</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1189" data-line-number="1189"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1189" data-line-number="1189"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		*entity_len = c-&gt;<span class="pl-smi">data</span>.<span class="pl-smi">multicodepoint_table</span>[<span class="pl-c1">0</span>].<span class="pl-smi">leading_entry</span>.<span class="pl-smi">default_entity_len</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1190" data-line-number="1190"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-	}<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1190" data-line-number="1190"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1191" data-line-number="1191"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1191" data-line-number="1191"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1192" data-line-number="1192"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1192" data-line-number="1192"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">/*</span> }}} <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1193" data-line-number="1193"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1193" data-line-number="1193"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="164">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=1255&amp;next_line_num_right=1255&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1193&amp;prev_line_num_right=1193&amp;right_hunk_size=7"
            data-left-range="1194-1254" data-right-range="1194-1254">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1255,7 +1255,7 @@ PHPAPI char *php_escape_html_entities_ex(unsigned char *old, size_t oldlen, size</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1255" data-line-number="1255"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1255" data-line-number="1255"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1256" data-line-number="1256"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1256" data-line-number="1256"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c"><span class="pl-c">/*</span> initial estimate <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1257" data-line-number="1257"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1257" data-line-number="1257"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">if</span> (oldlen &lt; <span class="pl-c1">64</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1258" data-line-number="1258"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		maxlen = <span class="pl-c1">128</span>;<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1258" data-line-number="1258"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		maxlen = <span class="pl-c1">128</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1259" data-line-number="1259"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1259" data-line-number="1259"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	} <span class="pl-k">else</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1260" data-line-number="1260"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1260" data-line-number="1260"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		maxlen = <span class="pl-c1">2</span> * oldlen;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1261" data-line-number="1261"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1261" data-line-number="1261"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (maxlen &lt; oldlen) {</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="173">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=1444&amp;next_line_num_right=1444&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1261&amp;prev_line_num_right=1261&amp;right_hunk_size=10"
            data-left-range="1262-1443" data-right-range="1262-1443">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1444,6 +1444,10 @@ static void php_html_entities(INTERNAL_FUNCTION_PARAMETERS, int all)</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1444" data-line-number="1444"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1444" data-line-number="1444"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1445" data-line-number="1445"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1445" data-line-number="1445"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1446" data-line-number="1446"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1446" data-line-number="1446"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	replaced = <span class="pl-c1">php_escape_html_entities_ex</span>(str, str_len, &amp;new_len, all, (<span class="pl-k">int</span>) flags, hint_charset, double_encode TSRMLS_CC);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1447" data-line-number="1447"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">if</span> (new_len &gt; INT_MAX) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1448" data-line-number="1448"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-c1">efree</span>(replaced);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1449" data-line-number="1449"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		RETURN_FALSE;</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1450" data-line-number="1450"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1447" data-line-number="1447"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1451" data-line-number="1451"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c1">RETVAL_STRINGL</span>(replaced, (<span class="pl-k">int</span>)new_len, <span class="pl-c1">0</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1448" data-line-number="1448"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1452" data-line-number="1452"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1449" data-line-number="1449"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1453" data-line-number="1453"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">/*</span> }}} <span class="pl-c">*/</span></span></span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="184">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=1577&amp;next_line_num_right=1581&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1449&amp;prev_line_num_right=1453&amp;right_hunk_size=7"
            data-left-range="1450-1576" data-right-range="1454-1580">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1577,7 +1581,7 @@ static inline void write_s3row_data(</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1577" data-line-number="1577"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1581" data-line-number="1581"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			} <span class="pl-k">else</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1578" data-line-number="1578"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1582" data-line-number="1582"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				spe_cp = uni_cp;</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1579" data-line-number="1579"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1583" data-line-number="1583"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			}</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1580" data-line-number="1580"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">			</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1584" data-line-number="1584"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1581" data-line-number="1581"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1585" data-line-number="1585"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			written_k2 = <span class="pl-c1">write_octet_sequence</span>(&amp;key[written_k1], charset, spe_cp);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1582" data-line-number="1582"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1586" data-line-number="1586"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c1">memcpy</span>(&amp;entity[<span class="pl-c1">1</span>], mcpr[i].<span class="pl-smi">normal_entry</span>.<span class="pl-smi">entity</span>, l);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1583" data-line-number="1583"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1587" data-line-number="1587"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			entity[l + <span class="pl-c1">1</span>] = <span class="pl-s"><span class="pl-pds">&#39;</span>;<span class="pl-pds">&#39;</span></span>;</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="193">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=1615&amp;next_line_num_right=1619&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1583&amp;prev_line_num_right=1587&amp;right_hunk_size=7"
            data-left-range="1584-1614" data-right-range="1588-1618">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -1615,7 +1619,7 @@ PHP_FUNCTION(get_html_translation_table)</td>
  </tr>

    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1615" data-line-number="1615"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1619" data-line-number="1619"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c1">LIMIT_ALL</span>(all, doctype, charset);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1616" data-line-number="1616"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1620" data-line-number="1620"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1617" data-line-number="1617"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1621" data-line-number="1621"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c1">array_init</span>(return_value);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1618" data-line-number="1618"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="x x-first x-last">	</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1622" data-line-number="1622"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1619" data-line-number="1619"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1623" data-line-number="1623"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	entity_table = <span class="pl-c1">determine_entity_table</span>(all, doctype);</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1620" data-line-number="1620"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1624" data-line-number="1624"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">if</span> (all &amp;&amp; !<span class="pl-c1">CHARSET_UNICODE_COMPAT</span>(charset)) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-d54e93201247cb5d840c86eb6b561b7eL1621" data-line-number="1621"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d54e93201247cb5d840c86eb6b561b7eR1625" data-line-number="1625"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		to_uni_table = enc_to_uni_index[charset];</span>

  </td>
</tr>



  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-d54e93201247cb5d840c86eb6b561b7e"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/php/php-src/blob_excerpt/81d8aff9e9adb54c09de2fda1277610b291780cb?diff=unified&amp;in_wiki_context=&amp;mode=100644&amp;path=ext%2Fstandard%2Fhtml.c&amp;prev_line_num_left=1621&amp;prev_line_num_right=1625"
          data-left-range="1622-1712"
          data-right-range="1626-1712">
       <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

          </table>
        </div>

  </div>
</div>

  </div>

</div>

<button type="button" class="js-toggle-all-file-notes" data-hotkey="i" style="display:none">Toggle all file notes</button>

<svg aria-hidden="true" width="340px" height="84px" viewBox="0 0 340 84" version="1.1"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  class="diff-placeholder-svg position-absolute bottom-0">
  <defs>
    <clippath id="diff-placeholder">
      <rect x="0" y="0" width="67.0175439" height="11.9298746" rx="2"></rect>
      <rect x="18.9473684" y="47.7194983" width="100.701754" height="11.9298746" rx="2"></rect>
      <rect x="0" y="71.930126" width="37.8947368" height="11.9298746" rx="2"></rect>
      <rect x="127.017544" y="48.0703769" width="53.3333333" height="11.9298746" rx="2"></rect>
      <rect x="187.719298" y="48.0703769" width="72.9824561" height="11.9298746" rx="2"></rect>
      <rect x="76.8421053" y="0" width="140.350877" height="11.9298746" rx="2"></rect>
      <rect x="17.8947368" y="23.8597491" width="140.350877" height="11.9298746" rx="2"></rect>
      <rect x="166.315789" y="23.8597491" width="173.684211" height="11.9298746" rx="2"></rect>
    </clippath>

    <linearGradient id="animated-diff-gradient" x1="0" x2="0" y1="0" y2="1" spreadMethod="reflect">
      <stop offset="0" stop-color="#eee"></stop>
      <stop offset="0.2" stop-color="#eee"></stop>
      <stop offset="0.5" stop-color="#ddd"></stop>
      <stop offset="0.8" stop-color="#eee"></stop>
      <stop offset="1" stop-color="#eee"></stop>
      <animateTransform attributeName="y1" values="0%; 100%; 0" dur="1s" repeatCount="3"></animateTransform>
      <animateTransform attributeName="y2" values="100%; 200%; 0" dur="1s" repeatCount="3"></animateTransform>
    </linearGradient>
  </defs>
</svg>



  <div id="all_commit_comments" class="js-quote-selection-container ">

    <div class="commit-comments-heading">
      
<div id="partial-visible-comments-header">
  <span class="float-right">
    
  </span>

  <h4 class="commit-comment-count">
    0 comments
    on commit <code class="commit-sha">0da8b8b</code>
  </h4>

</div>

    </div>

    <div id="comments" class="comment-holder">
      


  <!-- Rendered timeline since 2016-05-15 23:26:51 -->
  <div id="partial-timeline-marker"
        class="js-timeline-marker js-socket-channel js-updatable-content"
        data-channel="repo:1903522:commit:0da8b8b801f9276359262f1ef8274c7812d3dfda"
        data-url="/php/php-src/commit/0da8b8b801f9276359262f1ef8274c7812d3dfda/show_partial?partial=commit%2Ftimeline_marker&amp;since=1463380011"
        data-last-modified="Mon, 16 May 2016 06:26:51 GMT">

  </div>

    </div>

    

      Please <a rel="nofollow" href="/login?return_to=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fcommit%2F0da8b8b801f9276359262f1ef8274c7812d3dfda%3Fw%3D1.patch">sign in</a> to comment.

  </div>


  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

      
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">&copy; 2018 <span title="0.47078s from unicorn-1155764894-m23cd">GitHub</span>, Inc.</li>
        <li class="mr-3"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://help.github.com/articles/github-security/" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon" href="https://github.com">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a href="https://blog.github.com" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    <script crossorigin="anonymous" integrity="sha512-2GVr5rsbbfKbHM6oRrri41+qJ2ltJBCqluASS29fj+9yHGLFmFhq0C64VMdL57UJ34G2+FXU+8FZhaAOnsCEhw==" type="application/javascript" src="https://assets-cdn.github.com/assets/compat-bb7abfb15ed4ffb0da9056d4c980fba5.js"></script>
    <script crossorigin="anonymous" integrity="sha512-HD3VGNUZdKcyhzxthfJME6V4ByRTPdCGqlqq7sPm8jFweQQjz00nAJzWMAR9GUDiP2yYWqSxM6JxNxc2J/4rGQ==" type="application/javascript" src="https://assets-cdn.github.com/assets/frameworks-2afbd5df19ed1f9aaf0a04c15e9d0b35.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-8KvfmvJlNQr+hV/43C8aXCx0Q9Etz+L2Ql9HH4LZUxVole8GkSvx4R373hGWBjivgW8LHLhfPfvQr55N3qpYfw==" type="application/javascript" src="https://assets-cdn.github.com/assets/github-5eb5a0a782f98fd2a446939b2f7cecf7.js"></script>
    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
  </div>
</div>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

<div id="hovercard-aria-description" class="sr-only">
  Press h to open a hovercard with more details.
</div>


  </body>
</html>

