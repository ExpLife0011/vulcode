From 524465f70a32d0eb6bf047e6a05c76c22d52bfa2 Mon Sep 17 00:00:00 2001
From: Rob Millner <rmillner@redhat.com>
Date: Wed, 9 Jan 2013 14:24:54 -0800
Subject: [PATCH] Cleanup

---
 port-proxy/bin/openshift-port-proxy-cfg | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/port-proxy/bin/openshift-port-proxy-cfg b/port-proxy/bin/openshift-port-proxy-cfg
index 8e1223a0c6..d9de32220a 100755
--- a/port-proxy/bin/openshift-port-proxy-cfg
+++ b/port-proxy/bin/openshift-port-proxy-cfg
@@ -10,7 +10,9 @@ source /etc/openshift/node.conf
 cfgfile=/etc/openshift/port-proxy.cfg
 lockfile="/var/run/openshift-port-proxy.lock"
 reloadlock="/var/run/openshift-port-proxy-reload.lock"
-reqprefix="/tmp/openshift-port-proxy-reload.req"
+
+reqdir="/var/run/openshift-port-proxy"
+reqprefix="${reqdir}/reload.req"
 
 ### 
 # System service routines; systemctl may require modifications
@@ -142,6 +144,7 @@ lockwrap() {
     fi
 
     if [ $oldsum != $newsum ]; then
+        [ -e $reqdir ] || mkdir -m 750 $reqdir
         reqfile=$(mktemp ${reqprefix}.XXXXXX)
         flock 201
 
