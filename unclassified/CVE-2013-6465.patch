From 4818204506e8e94645b52adb9426bedfa9ffdd04 Mon Sep 17 00:00:00 2001
From: Salaboy <salaboy@gmail.com>
Date: Wed, 8 Jan 2014 15:15:48 -0300
Subject: [PATCH] BZ-1049109: escaping task name html inputs

---
 .../ht/client/editors/taskdetailsmulti/TaskDetailsMultiPresenter.java  | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/jbpm-console-ng-human-tasks/jbpm-console-ng-human-tasks-client/src/main/java/org/jbpm/console/ng/ht/client/editors/taskdetailsmulti/TaskDetailsMultiPresenter.java b/jbpm-console-ng-human-tasks/jbpm-console-ng-human-tasks-client/src/main/java/org/jbpm/console/ng/ht/client/editors/taskdetailsmulti/TaskDetailsMultiPresenter.java
index ac933cde5..d52b0c287 100644
--- a/jbpm-console-ng-human-tasks/jbpm-console-ng-human-tasks-client/src/main/java/org/jbpm/console/ng/ht/client/editors/taskdetailsmulti/TaskDetailsMultiPresenter.java
+++ b/jbpm-console-ng-human-tasks/jbpm-console-ng-human-tasks-client/src/main/java/org/jbpm/console/ng/ht/client/editors/taskdetailsmulti/TaskDetailsMultiPresenter.java
@@ -20,6 +20,7 @@
 import javax.inject.Inject;
 
 import com.google.gwt.core.client.GWT;
+import com.google.gwt.safehtml.shared.SafeHtmlUtils;
 import com.google.gwt.user.client.ui.HTMLPanel;
 import com.google.gwt.user.client.ui.IsWidget;
 import java.util.HashMap;
@@ -117,7 +118,7 @@ public void onTaskSelectionEvent(@Observes TaskSelectionEvent event){
         selectedTaskId = event.getTaskId();
         selectedTaskName = event.getTaskName();
         
-        view.getTaskIdAndName().setText(String.valueOf(selectedTaskId) + " - "+selectedTaskName);
+        view.getTaskIdAndName().setText(SafeHtmlUtils.htmlEscape(String.valueOf(selectedTaskId) + " - "+selectedTaskName));
         
         view.getContent().clear();
         
