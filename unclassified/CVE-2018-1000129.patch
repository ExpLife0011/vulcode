





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://assets-cdn.github.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-hqbuBb0QOOmiWgl8a1V1N5q6TI/G0A2hVt/lCFYafR+fYsuXeRUcsdcb/yUyVEHYXktmUXl0Mx9s/BOUNZVq4w==" rel="stylesheet" href="https://assets-cdn.github.com/assets/frameworks-23c9e7262eee71bc6f67f6950190a162.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-Dz6UOi9t3mC0y7H781oNdigCIAV0ZQ3eP+nYT5IakV5DsGtrezIVff2haLv+dK3gXfTWkTgQEbwZDibwNH82WQ==" rel="stylesheet" href="https://assets-cdn.github.com/assets/github-f33d51cdc14ddc36995b2e42a6259a0b.css" />
  
  
  <link crossorigin="anonymous" media="all" integrity="sha512-cCY9KKeDzfGd+snVDZwcOIrTjK+JAFW4FR1c4OGJo1Z2QZNbAGVD6JlcnHL19LBcdByWHVxwrAPwigT/v/DWyQ==" rel="stylesheet" href="https://assets-cdn.github.com/assets/site-7472e7b4603d4095447d49d428375ab8.css" />
  

  <meta name="viewport" content="width=device-width">
  
  <title>fix: Verify a given &#39;mimeType&#39; and/or &#39;callback&#39; request parameter · rhuss/jolokia@5895d5c · GitHub</title>
    <meta name="description" content="GitHub is where people build software. More than 27 million people use GitHub to discover, fork, and contribute to over 80 million projects.">
  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta property="og:image" content="https://avatars0.githubusercontent.com/u/99080?s=200&amp;v=4" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="fix: Verify a given &#39;mimeType&#39; and/or &#39;callback&#39; request parameter · rhuss/jolokia@5895d5c" /><meta property="og:url" content="https://github.com/rhuss/jolokia/commit/5895d5c137c335e6b473e9dcb9baf748851bbc5f" /><meta property="og:description" content="So that only fixed values are possible, in order to avoid XSS attack
vectors." /><meta property="og:updated_time" content="1516786553" />

  <link rel="assets" href="https://assets-cdn.github.com/">
  
  <meta name="pjax-timeout" content="1000">
  
  <meta name="request-id" content="C849:9DDF:1DE374:29BDE6:5AFBD46D" data-pjax-transient>


  

  <meta name="selected-link" value="repo_commits" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
    <meta name="google-analytics" content="UA-3769691-2">

<meta name="octolytics-host" content="collector.githubapp.com" /><meta name="octolytics-app-id" content="github" /><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event" /><meta name="octolytics-dimension-request_id" content="C849:9DDF:1DE374:29BDE6:5AFBD46D" /><meta name="octolytics-dimension-region_edge" content="sea" /><meta name="octolytics-dimension-region_render" content="iad" />
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/commit/show" data-pjax-transient="true" />




  <meta class="js-ga-set" name="dimension1" content="Logged Out">


  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="ZDI0MjI3ZjZiYzQ4OGFiZDM1MGRmNDA0NmJiNzU0M2IyYzUwNmQ3NmE3YmEyYjAyYzIxMmQ3M2I1Mzk5N2RjNHx7InJlbW90ZV9hZGRyZXNzIjoiMTA3LjE4NC4xNTcuMzQiLCJyZXF1ZXN0X2lkIjoiQzg0OTo5RERGOjFERTM3NDoyOUJERTY6NUFGQkQ0NkQiLCJ0aW1lc3RhbXAiOjE1MjY0NTMzNTgsImhvc3QiOiJnaXRodWIuY29tIn0=">

    <meta name="enabled-features" content="UNIVERSE_BANNER,FREE_TRIALS,MARKETPLACE_INSIGHTS,MARKETPLACE_SELF_SERVE,MARKETPLACE_INSIGHTS_CONVERSION_PERCENTAGES">

  <meta name="html-safe-nonce" content="373b650d847c3cf690b44bea1d65961b59de023c">

  <meta http-equiv="x-pjax-version" content="3a94a771ed4e5e109a7d6636a8cf1782">
  

      <link href="/rhuss/jolokia/commit/5895d5c137c335e6b473e9dcb9baf748851bbc5f.diff" rel="alternate" type="text/plain+diff" data-pjax-transient="true" />
  <link href="/rhuss/jolokia/commit/5895d5c137c335e6b473e9dcb9baf748851bbc5f.patch" rel="alternate" type="text/plain+patch" data-pjax-transient="true" />

  <meta name="diff-view" content="unified" data-pjax-transient>
  <link href="https://github.com/rhuss/jolokia/commits/5895d5c137c335e6b473e9dcb9baf748851bbc5f.atom" rel="alternate" title="Recent Commits to jolokia:5895d5c137c335e6b473e9dcb9baf748851bbc5f" type="application/atom+xml">

  <meta name="description" content="jolokia - JMX on Capsaicin">
  <meta name="go-import" content="github.com/rhuss/jolokia git https://github.com/rhuss/jolokia.git">

  <meta name="octolytics-dimension-user_id" content="99080" /><meta name="octolytics-dimension-user_login" content="rhuss" /><meta name="octolytics-dimension-repository_id" content="777444" /><meta name="octolytics-dimension-repository_nwo" content="rhuss/jolokia" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="777444" /><meta name="octolytics-dimension-repository_network_root_nwo" content="rhuss/jolokia" /><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false" />




  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



<link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-out env-production">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="px-2 py-4 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        <header class="Header header-logged-out  position-relative f4 py-3" role="banner">
  <div class="container-lg d-flex px-3">
    <div class="d-flex flex-justify-between flex-items-center">
      <a class="header-logo-invertocat my-0" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
        <svg height="32" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
      </a>

    </div>

    <div class="HeaderMenu HeaderMenu--bright d-flex flex-justify-between flex-auto">
        <nav class="mt-0">
          <ul class="d-flex list-style-none">
              <li class="ml-2">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:features" data-selected-links="/features /features/project-management /features/code-review /features/project-management /features/integrations /features" href="/features">
                  Features
</a>              </li>
              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/security /business/customers /business" href="/business">
                  Business
</a>              </li>

              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="/explore">
                  Explore
</a>              </li>

              <li class="ml-4">
                    <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:marketplace" data-selected-links=" /marketplace" href="/marketplace">
                      Marketplace
</a>              </li>
              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:pricing" data-selected-links="/pricing /pricing/developer /pricing/team /pricing/business-hosted /pricing/business-enterprise /pricing" href="/pricing">
                  Pricing
</a>              </li>
          </ul>
        </nav>

      <div class="d-flex">
          <div class="d-lg-flex flex-items-center mr-3">
            <div class="header-search scoped-search site-scoped-search js-site-search" role="search">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" data-scope-type="Repository" data-scope-id="777444" data-scoped-search-url="/rhuss/jolokia/search" data-unscoped-search-url="/search" action="/rhuss/jolokia/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
    <label class="form-control header-search-wrapper  js-chromeless-input-container">
          <a class="header-search-scope no-underline" href="/rhuss/jolokia/commit/5895d5c137c335e6b473e9dcb9baf748851bbc5f">This repository</a>
      <input type="text"
        class="form-control header-search-input  js-site-search-focus js-site-search-field is-clearable"
        data-hotkey="s,/"
        name="q"
        value=""
        placeholder="Search"
        aria-label="Search this repository"
        data-unscoped-placeholder="Search GitHub"
        data-scoped-placeholder="Search"
        autocapitalize="off"
        >
        <input type="hidden" class="js-site-search-type-field" name="type" >
    </label>
</form></div>

          </div>

        <span class="d-inline-block">
            <div class="HeaderNavlink px-0 py-2 m-0">
              <a class="text-bold text-white no-underline" href="/login?return_to=%2Frhuss%2Fjolokia%2Fcommit%2F5895d5c137c335e6b473e9dcb9baf748851bbc5f" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
                <span class="text-gray">or</span>
                <a class="text-bold text-white no-underline" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
            </div>
        </span>
      </div>
    </div>
  </div>
</header>

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">
</div>



  <div role="main" class="application-main ">
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container >
      






  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">
  <li>
      <a href="/login?return_to=%2Frhuss%2Fjolokia"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
    Watch
  </a>
  <a class="social-count" href="/rhuss/jolokia/watchers"
     aria-label="63 users are watching this repository">
    63
  </a>

  </li>

  <li>
      <a href="/login?return_to=%2Frhuss%2Fjolokia"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <svg class="octicon octicon-star" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"/></svg>
    Star
  </a>

    <a class="social-count js-social-count" href="/rhuss/jolokia/stargazers"
      aria-label="537 users starred this repository">
      537
    </a>

  </li>

  <li>
      <a href="/login?return_to=%2Frhuss%2Fjolokia"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <svg class="octicon octicon-repo-forked" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
        Fork
      </a>

    <a href="/rhuss/jolokia/network" class="social-count"
       aria-label="159 users forked this repository">
      159
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" href="/rhuss">rhuss</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="/rhuss/jolokia">jolokia</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
     role="navigation"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /rhuss/jolokia" href="/rhuss/jolokia">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /rhuss/jolokia/issues" href="/rhuss/jolokia/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">100</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /rhuss/jolokia/pulls" href="/rhuss/jolokia/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">5</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /rhuss/jolokia/projects" href="/rhuss/jolokia/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      Projects
      <span class="Counter" >0</span>
</a>
    <a class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /rhuss/jolokia/wiki" href="/rhuss/jolokia/wiki">
      <svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"/></svg>
      Wiki
</a>

  <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse /rhuss/jolokia/pulse" href="/rhuss/jolokia/pulse">
    <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
    Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
  <a href="/rhuss/jolokia/commit/5895d5c137c335e6b473e9dcb9baf748851bbc5f" class="d-none js-permalink-shortcut" data-hotkey="y">Permalink</a>


  

  
<div class="commit full-commit px-2 pt-2 ">
  <a href="/rhuss/jolokia/tree/5895d5c137c335e6b473e9dcb9baf748851bbc5f" class="btn btn-outline float-right" title="Browse the repository at this point in the history" rel="nofollow">Browse files</a>

    <p class="commit-title">
      fix: Verify a given 'mimeType' and/or 'callback' request parameter
    </p>

    <div class="commit-desc"><pre>So that only fixed values are possible, in order to avoid XSS attack
vectors.</pre></div>

  <div class="commit-branches">
  <include-fragment src="/rhuss/jolokia/branch_commits/5895d5c137c335e6b473e9dcb9baf748851bbc5f">
    <svg class="octicon octicon-git-branch" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
    <ul class="branches-list">
      <li class="loading">Loading branch information<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></li>
    </ul>
</include-fragment></div>


  <div class="commit-meta clearfix p-2 no-wrap d-flex flex-items-center">
    
<div class="AvatarStack flex-self-start ">
  <div class="AvatarStack-body" aria-label="rhuss">

        <a class="avatar" data-skip-pjax="true" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss">
          <img height="20" width="20" alt="@rhuss" src="https://avatars3.githubusercontent.com/u/99080?s=60&amp;v=4" />
</a>  </div>
</div>

    <div class="flex-auto">
      
      <a href="/rhuss/jolokia/commits?author=rhuss"
     class="commit-author tooltipped tooltipped-s user-mention"
     aria-label="View all commits by rhuss">rhuss</a>


  committed
  <relative-time datetime="2018-01-24T09:35:53Z">Jan 24, 2018</relative-time>

      

    </div>
    <div>
      <span class="sha-block" data-pjax>
        1 parent
          
          <a class="sha" data-hotkey="p" href="/rhuss/jolokia/commit/557c23edec6b1321fac9bf73239e6cadfda77a07">557c23e</a>
      </span>
      <span class="sha-block">commit <span class="sha user-select-contain">5895d5c137c335e6b473e9dcb9baf748851bbc5f</span></span>
    </div>
  </div>
</div>




      <a name="diff-stat"></a>
      <div id="toc" class="details-collapse table-of-contents js-details-container Details">
  <div class="BtnGroup float-right" data-ga-load="Diff, view, Viewed Unified Diff">
  <a class="btn btn-sm selected BtnGroup-item" href="https://github.com/rhuss/jolokia/commit/5895d5c137c335e6b473e9dcb9baf748851bbc5f?diff=unified">
    Unified
  </a>
  <a class="btn btn-sm BtnGroup-item" href="https://github.com/rhuss/jolokia/commit/5895d5c137c335e6b473e9dcb9baf748851bbc5f?diff=split">
    Split
  </a>
</div>


  <div class="toc-diff-stats">
    <svg class="octicon octicon-diff" viewBox="0 0 13 16" version="1.1" width="13" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 7h2v1H6v2H5V8H3V7h2V5h1v2zm-3 6h5v-1H3v1zM7.5 2L11 5.5V15c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h6.5zM10 6L7 3H1v12h9V6zM8.5 0H3v1h5l4 4v8h1V4.5L8.5 0z"/></svg>
    Showing
    <button type="button" class="btn-link js-details-target" aria-expanded="false">
      5 changed files
    </button>
    with
    <strong>242 additions</strong>
    and <strong>28 deletions</strong>.
  </div>

  <ol class="content collapse js-transitionable">
    <li>
      <span class="diffstat float-right">
          <span class="text-green">
            +21
          </span>
          <span class="text-red">
            −11
          </span>
          <a href="#diff-f19898247eddb55de6400489bff748ad" class="tooltipped tooltipped-s" aria-label="32 lines changed">
            <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span>
          </a>
      </span>
      <svg title="modified" class="octicon octicon-diff-modified" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"/></svg>
      <a href="#diff-f19898247eddb55de6400489bff748ad">agent/core/src/main/java/org/jolokia/http/AgentServlet.java</a>
    </li>
    <li>
      <span class="diffstat float-right">
          <span class="text-green">
            +74
          </span>
          <span class="text-red">
            −0
          </span>
          <a href="#diff-007269586489c44d181822c55f0e1019" class="tooltipped tooltipped-s" aria-label="74 lines changed">
            <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span>
          </a>
      </span>
      <svg title="added" class="octicon octicon-diff-added" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z"/></svg>
      <a href="#diff-007269586489c44d181822c55f0e1019">agent/core/src/main/java/org/jolokia/util/MimeTypeUtil.java</a>
    </li>
    <li>
      <span class="diffstat float-right">
          <span class="text-green">
            +67
          </span>
          <span class="text-red">
            −3
          </span>
          <a href="#diff-bc0252c7193321fc76e84540196de5a2" class="tooltipped tooltipped-s" aria-label="70 lines changed">
            <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span>
          </a>
      </span>
      <svg title="modified" class="octicon octicon-diff-modified" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"/></svg>
      <a href="#diff-bc0252c7193321fc76e84540196de5a2">agent/core/src/test/java/org/jolokia/http/AgentServletTest.java</a>
    </li>
    <li>
      <span class="diffstat float-right">
          <span class="text-green">
            +19
          </span>
          <span class="text-red">
            −13
          </span>
          <a href="#diff-8e2154b44ca806ec617481776bb63e4d" class="tooltipped tooltipped-s" aria-label="32 lines changed">
            <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span>
          </a>
      </span>
      <svg title="modified" class="octicon octicon-diff-modified" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"/></svg>
      <a href="#diff-8e2154b44ca806ec617481776bb63e4d">agent/jvm/src/main/java/org/jolokia/jvmagent/handler/JolokiaHttpHandler.java</a>
    </li>
    <li>
      <span class="diffstat float-right">
          <span class="text-green">
            +61
          </span>
          <span class="text-red">
            −1
          </span>
          <a href="#diff-fa644f72c7f0eba15b021b8080e2d7f0" class="tooltipped tooltipped-s" aria-label="62 lines changed">
            <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span>
          </a>
      </span>
      <svg title="modified" class="octicon octicon-diff-modified" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"/></svg>
      <a href="#diff-fa644f72c7f0eba15b021b8080e2d7f0">agent/jvm/src/test/java/org/jolokia/jvmagent/handler/JolokiaHttpHandlerTest.java</a>
    </li>
  </ol>
</div>

    <div id="files" class="diff-view ">

  <div class="js-diff-progressive-container">
    
<a name="diff-f19898247eddb55de6400489bff748ad"></a>
<div id="diff-0"
     class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           ">
  <div class="file-header js-file-header" data-path="agent/core/src/main/java/org/jolokia/http/AgentServlet.java" data-short-path="f198982" data-anchor="diff-f19898247eddb55de6400489bff748ad">
    <div class="file-actions">

        <span class="show-file-notes pt-1">
          <label>
            <input type="checkbox" checked="checked" class="js-toggle-file-notes">
            Show comments
          </label>
        </span>

          <a href="/rhuss/jolokia/blob/5895d5c137c335e6b473e9dcb9baf748851bbc5f/agent/core/src/main/java/org/jolokia/http/AgentServlet.java" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 5895d5c ">View</a>


      <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true">
        <svg class="octicon octicon-chevron-down Details-content--shown" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z"/></svg>
        <svg class="octicon octicon-chevron-up Details-content--hidden" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z"/></svg>
      </button>
    </div>
    <div class="file-info">
        <span class="diffstat tooltipped tooltipped-e" aria-label="21 additions &amp; 11 deletions">32 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span></span>

      <a href="#diff-f19898247eddb55de6400489bff748ad" class="link-gray-dark"
         title="agent/core/src/main/java/org/jolokia/http/AgentServlet.java">agent/core/src/main/java/org/jolokia/http/AgentServlet.java</a>

      
    </div>
  </div>
  <div class="js-file-content Details-content--shown">

        <div class="data highlight js-blob-wrapper" style="overflow-x: auto">
          <table class="diff-table tab-size  " data-tab-size="8">
            
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f19898247eddb55de6400489bff748ad"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/6a0e73b199df693e28377812266e172a6d0681a7?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=20&amp;mode=100755&amp;next_line_num_left=264&amp;next_line_num_right=264&amp;path=agent%2Fcore%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServlet.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=28"
            data-left-range="1-263" data-right-range="1-263">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -264,20 +264,28 @@ protected void doOptions(HttpServletRequest req, HttpServletResponse resp) throw</td>
  </tr>

    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL264" data-line-number="264"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR264" data-line-number="264"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">@SuppressWarnings</span>({ <span class="pl-s"><span class="pl-pds">&quot;</span>PMD.AvoidCatchingThrowable<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span>PMD.AvoidInstanceofChecksInCatchClause<span class="pl-pds">&quot;</span></span> })</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL265" data-line-number="265"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR265" data-line-number="265"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">handle</span>(<span class="pl-smi">ServletRequestHandler</span> <span class="pl-v">pReqHandler</span>,<span class="pl-smi">HttpServletRequest</span> <span class="pl-v">pReq</span>, <span class="pl-smi">HttpServletResponse</span> <span class="pl-v">pResp</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL266" data-line-number="266"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR266" data-line-number="266"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-smi">JSONAware</span> json <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR267" data-line-number="267"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL267" data-line-number="267"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR268" data-line-number="268"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-k">try</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL268" data-line-number="268"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR269" data-line-number="269"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             <span class="pl-c"><span class="pl-c">//</span> Check access policy</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL269" data-line-number="269"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR270" data-line-number="270"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             requestHandler<span class="pl-k">.</span>checkAccess(allowDnsReverseLookup <span class="pl-k">?</span> pReq<span class="pl-k">.</span>getRemoteHost() <span class="pl-k">:</span> <span class="pl-c1">null</span>,</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL270" data-line-number="270"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR271" data-line-number="271"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                                        pReq<span class="pl-k">.</span>getRemoteAddr(),</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL271" data-line-number="271"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR272" data-line-number="272"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                                        getOriginOrReferer(pReq));</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL272" data-line-number="272"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR273" data-line-number="273"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR274" data-line-number="274"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-c"><span class="pl-c">//</span> If a callback is given, check this is a valid javascript function name</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR275" data-line-number="275"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            validateCallbackIfGiven(pReq);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR276" data-line-number="276"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL273" data-line-number="273"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR277" data-line-number="277"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             <span class="pl-c"><span class="pl-c">//</span> Remember the agent URL upon the first request. Needed for discovery</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL274" data-line-number="274"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR278" data-line-number="278"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             updateAgentDetailsIfNeeded(pReq);</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL275" data-line-number="275"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR279" data-line-number="279"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL276" data-line-number="276"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR280" data-line-number="280"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             <span class="pl-c"><span class="pl-c">//</span> Dispatch for the proper HTTP request method</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL277" data-line-number="277"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR281" data-line-number="281"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             json <span class="pl-k">=</span> handleSecurely(pReqHandler, pReq, pResp);</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL278" data-line-number="278"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR282" data-line-number="282"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         } <span class="pl-k">catch</span> (<span class="pl-smi">Throwable</span> exp) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL279" data-line-number="279"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            json <span class="pl-k">=</span> requestHandler<span class="pl-k">.</span>handleThrowable(</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR283" data-line-number="283"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-k">try</span> {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR284" data-line-number="284"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                json <span class="pl-k">=</span> requestHandler<span class="pl-k">.</span>handleThrowable(</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL280" data-line-number="280"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR285" data-line-number="285"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                     exp <span class="pl-k">instanceof</span> <span class="pl-smi">RuntimeMBeanException</span> <span class="pl-k">?</span> ((<span class="pl-smi">RuntimeMBeanException</span>) exp)<span class="pl-k">.</span>getTargetException() <span class="pl-k">:</span> exp);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR286" data-line-number="286"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            } <span class="pl-k">catch</span> (<span class="pl-smi">Throwable</span> exp2) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR287" data-line-number="287"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                exp2<span class="pl-k">.</span>printStackTrace();</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR288" data-line-number="288"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL281" data-line-number="281"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR289" data-line-number="289"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         } <span class="pl-k">finally</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL282" data-line-number="282"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR290" data-line-number="290"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             setCorsHeader(pReq, pResp);</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL283" data-line-number="283"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR291" data-line-number="291"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="30">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f19898247eddb55de6400489bff748ad"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/6a0e73b199df693e28377812266e172a6d0681a7?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100755&amp;next_line_num_left=289&amp;next_line_num_right=297&amp;path=agent%2Fcore%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServlet.java&amp;prev_line_num_left=283&amp;prev_line_num_right=291&amp;right_hunk_size=7"
            data-left-range="284-288" data-right-range="292-296">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -289,6 +297,7 @@ private void handle(ServletRequestHandler pReqHandler,HttpServletRequest pReq, H</td>
  </tr>

    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL289" data-line-number="289"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR297" data-line-number="297"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL290" data-line-number="290"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR298" data-line-number="298"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL291" data-line-number="291"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR299" data-line-number="299"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR300" data-line-number="300"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL292" data-line-number="292"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR301" data-line-number="301"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">private</span> <span class="pl-smi">JSONAware</span> <span class="pl-en">handleSecurely</span>(<span class="pl-k">final</span> <span class="pl-smi">ServletRequestHandler</span> <span class="pl-v">pReqHandler</span>, <span class="pl-k">final</span> <span class="pl-smi">HttpServletRequest</span> <span class="pl-v">pReq</span>, <span class="pl-k">final</span> <span class="pl-smi">HttpServletResponse</span> <span class="pl-v">pResp</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span>, <span class="pl-smi">PrivilegedActionException</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL293" data-line-number="293"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR302" data-line-number="302"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-smi">Subject</span> subject <span class="pl-k">=</span> (<span class="pl-smi">Subject</span>) pReq<span class="pl-k">.</span>getAttribute(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>JAAS_SUBJECT_REQUEST_ATTRIBUTE</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL294" data-line-number="294"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR303" data-line-number="303"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-k">if</span> (subject <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="38">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f19898247eddb55de6400489bff748ad"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/6a0e73b199df693e28377812266e172a6d0681a7?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=15&amp;mode=100755&amp;next_line_num_left=380&amp;next_line_num_right=389&amp;path=agent%2Fcore%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServlet.java&amp;prev_line_num_left=294&amp;prev_line_num_right=303&amp;right_hunk_size=6"
            data-left-range="295-379" data-right-range="304-388">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -380,15 +389,6 @@ private void setCorsHeader(HttpServletRequest pReq, HttpServletResponse pResp) {</td>
  </tr>

    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL380" data-line-number="380"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR389" data-line-number="389"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL381" data-line-number="381"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR390" data-line-number="390"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL382" data-line-number="382"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR391" data-line-number="391"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL383" data-line-number="383"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-    <span class="pl-c"><span class="pl-c">//</span> Extract mime type for response (if not JSONP)</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL384" data-line-number="384"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-    <span class="pl-k">private</span> <span class="pl-smi">String</span> <span class="pl-en">getMimeType</span>(<span class="pl-smi">HttpServletRequest</span> <span class="pl-v">pReq</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL385" data-line-number="385"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        <span class="pl-smi">String</span> requestMimeType <span class="pl-k">=</span> pReq<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL386" data-line-number="386"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        <span class="pl-k">if</span> (requestMimeType <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL387" data-line-number="387"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-k">return</span> requestMimeType;</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL388" data-line-number="388"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL389" data-line-number="389"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        <span class="pl-k">return</span> configMimeType;</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL390" data-line-number="390"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-    }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL391" data-line-number="391"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL392" data-line-number="392"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR392" data-line-number="392"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">private</span> <span class="pl-k">boolean</span> <span class="pl-en">isStreamingEnabled</span>(<span class="pl-smi">HttpServletRequest</span> <span class="pl-v">pReq</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL393" data-line-number="393"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR393" data-line-number="393"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-smi">String</span> streamingFromReq <span class="pl-k">=</span> pReq<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>STREAMING</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL394" data-line-number="394"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR394" data-line-number="394"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-k">if</span> (streamingFromReq <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="54">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f19898247eddb55de6400489bff748ad"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/6a0e73b199df693e28377812266e172a6d0681a7?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=8&amp;mode=100755&amp;next_line_num_left=470&amp;next_line_num_right=470&amp;path=agent%2Fcore%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServlet.java&amp;prev_line_num_left=394&amp;prev_line_num_right=394&amp;right_hunk_size=12"
            data-left-range="395-469" data-right-range="395-469">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -470,8 +470,12 @@ Configuration initConfig(ServletConfig pConfig) {</td>
  </tr>

    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL470" data-line-number="470"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR470" data-line-number="470"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL471" data-line-number="471"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR471" data-line-number="471"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">sendResponse</span>(<span class="pl-smi">HttpServletResponse</span> <span class="pl-v">pResp</span>, <span class="pl-smi">HttpServletRequest</span> <span class="pl-v">pReq</span>, <span class="pl-smi">JSONAware</span> <span class="pl-v">pJson</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL472" data-line-number="472"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR472" data-line-number="472"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-smi">String</span> callback <span class="pl-k">=</span> pReq<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL473" data-line-number="473"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        setContentType(pResp, callback <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">?</span> <span class="pl-s"><span class="pl-pds">&quot;</span>text/javascript<span class="pl-pds">&quot;</span></span> <span class="pl-k">:</span> getMimeType(pReq));</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL474" data-line-number="474"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR473" data-line-number="473"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR474" data-line-number="474"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        setContentType(pResp,</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR475" data-line-number="475"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                       <span class="pl-smi">MimeTypeUtil</span><span class="pl-k">.</span>getResponseMimeType(</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR476" data-line-number="476"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                           pReq<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue()),</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR477" data-line-number="477"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                           configMimeType, callback</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR478" data-line-number="478"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                                                       ));</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL475" data-line-number="475"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR479" data-line-number="479"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         pResp<span class="pl-k">.</span>setStatus(<span class="pl-smi">HttpServletResponse</span><span class="pl-c1"><span class="pl-k">.</span>SC_OK</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL476" data-line-number="476"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR480" data-line-number="480"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         setNoCacheHeaders(pResp);</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL477" data-line-number="477"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR481" data-line-number="481"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-k">if</span> (pJson <span class="pl-k">==</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="68">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f19898247eddb55de6400489bff748ad"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/6a0e73b199df693e28377812266e172a6d0681a7?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100755&amp;next_line_num_left=487&amp;next_line_num_right=491&amp;path=agent%2Fcore%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServlet.java&amp;prev_line_num_left=477&amp;prev_line_num_right=481&amp;right_hunk_size=12"
            data-left-range="478-486" data-right-range="482-490">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -487,6 +491,12 @@ private void sendResponse(HttpServletResponse pResp, HttpServletRequest pReq, JS</td>
  </tr>

    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL487" data-line-number="487"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR491" data-line-number="491"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL488" data-line-number="488"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR492" data-line-number="492"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL489" data-line-number="489"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR493" data-line-number="493"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR494" data-line-number="494"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">validateCallbackIfGiven</span>(<span class="pl-smi">HttpServletRequest</span> <span class="pl-v">pReq</span>) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR495" data-line-number="495"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-smi">String</span> callback <span class="pl-k">=</span> pReq<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR496" data-line-number="496"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">if</span> (callback <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">&amp;&amp;</span> <span class="pl-k">!</span><span class="pl-smi">MimeTypeUtil</span><span class="pl-k">.</span>isValidCallback(callback)) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR497" data-line-number="497"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">IllegalArgumentException</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>Invalid callback name given, which must be a valid javascript function name<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR498" data-line-number="498"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR499" data-line-number="499"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL490" data-line-number="490"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR500" data-line-number="500"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">sendStreamingResponse</span>(<span class="pl-smi">HttpServletResponse</span> <span class="pl-v">pResp</span>, <span class="pl-smi">String</span> <span class="pl-v">pCallback</span>, <span class="pl-smi">JSONStreamAware</span> <span class="pl-v">pJson</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL491" data-line-number="491"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR501" data-line-number="501"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-smi">Writer</span> writer <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">OutputStreamWriter</span>(pResp<span class="pl-k">.</span>getOutputStream(), <span class="pl-s"><span class="pl-pds">&quot;</span>UTF-8<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-f19898247eddb55de6400489bff748adL492" data-line-number="492"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f19898247eddb55de6400489bff748adR502" data-line-number="502"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-smi">IoUtil</span><span class="pl-k">.</span>streamResponseAndClose(writer, pJson, pCallback);</span>

  </td>
</tr>



  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-f19898247eddb55de6400489bff748ad"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/rhuss/jolokia/blob_excerpt/6a0e73b199df693e28377812266e172a6d0681a7?diff=unified&amp;in_wiki_context=&amp;mode=100755&amp;path=agent%2Fcore%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServlet.java&amp;prev_line_num_left=492&amp;prev_line_num_right=502"
          data-left-range="493-600"
          data-right-range="503-600">
       <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

          </table>
        </div>

  </div>
</div>

    
<a name="diff-007269586489c44d181822c55f0e1019"></a>
<div id="diff-1"
     class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           ">
  <div class="file-header js-file-header" data-path="agent/core/src/main/java/org/jolokia/util/MimeTypeUtil.java" data-short-path="0072695" data-anchor="diff-007269586489c44d181822c55f0e1019">
    <div class="file-actions">

        <span class="show-file-notes pt-1">
          <label>
            <input type="checkbox" checked="checked" class="js-toggle-file-notes">
            Show comments
          </label>
        </span>

          <a href="/rhuss/jolokia/blob/5895d5c137c335e6b473e9dcb9baf748851bbc5f/agent/core/src/main/java/org/jolokia/util/MimeTypeUtil.java" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 5895d5c ">View</a>


      <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true">
        <svg class="octicon octicon-chevron-down Details-content--shown" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z"/></svg>
        <svg class="octicon octicon-chevron-up Details-content--hidden" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z"/></svg>
      </button>
    </div>
    <div class="file-info">
        <span class="diffstat tooltipped tooltipped-e" aria-label="74 additions &amp; 0 deletions">74 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span></span>

      <a href="#diff-007269586489c44d181822c55f0e1019" class="link-gray-dark"
         title="agent/core/src/main/java/org/jolokia/util/MimeTypeUtil.java">agent/core/src/main/java/org/jolokia/util/MimeTypeUtil.java</a>

      
    </div>
  </div>
  <div class="js-file-content Details-content--shown">

        <div class="data highlight js-blob-wrapper" style="overflow-x: auto">
          <table class="diff-table tab-size  " data-tab-size="8">
            
      <tr data-position="0">
    <td id="diff-007269586489c44d181822c55f0e1019L-1" class="blob-num blob-num-hunk non-expandable" data-line-number="..."></td>
    <td id="diff-007269586489c44d181822c55f0e1019R0" class="blob-num blob-num-hunk non-expandable" data-line-number="..."></td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -0,0 +1,74 @@</td>
  </tr>

    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R1" data-line-number="1"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-k">package</span> <span class="pl-smi">org.jolokia.util</span>;</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R2" data-line-number="2"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R3" data-line-number="3"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">java.util.regex.Pattern</span>;</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R4" data-line-number="4"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R5" data-line-number="5"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"><span class="pl-c">/**</span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R6" data-line-number="6"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * Helper class for handling proper response mime types</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R7" data-line-number="7"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> *</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R8" data-line-number="8"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * <span class="pl-k">@author</span> roland</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R9" data-line-number="9"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * <span class="pl-k">@since</span> 24.01.18</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R10" data-line-number="10"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R11" data-line-number="11"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MimeTypeUtil</span> {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R12" data-line-number="12"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R13" data-line-number="13"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R14" data-line-number="14"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-c"><span class="pl-c">/**</span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R15" data-line-number="15"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * Extract the response mime type. This value is calculated for different situations:</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R16" data-line-number="16"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;<span class="pl-ent">p</span>&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R17" data-line-number="17"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;<span class="pl-ent">ul</span>&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R18" data-line-number="18"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;<span class="pl-ent">li</span>&gt;If a callback is given and its valid, the mime type is &quot;text/javascript&quot;&lt;/li&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R19" data-line-number="19"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;<span class="pl-ent">li</span>&gt;Otherwise:</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R20" data-line-number="20"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;<span class="pl-ent">ul</span>&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R21" data-line-number="21"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;<span class="pl-ent">li</span>&gt;If a valid mimeType is given in the request (&quot;text/plain&quot;, &quot;application/json&quot;), then this</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R22" data-line-number="22"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * mimet type is returned&lt;/li&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R23" data-line-number="23"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;<span class="pl-ent">li</span>&gt;If another mimeType is given, then &quot;text/plain&quot; is used&lt;/li&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R24" data-line-number="24"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;<span class="pl-ent">li</span>&gt;If no mimeType is given then a given default mime type is used, but also sanitized</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R25" data-line-number="25"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * as described above&lt;/li&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R26" data-line-number="26"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;/ul&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R27" data-line-number="27"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;/li&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R28" data-line-number="28"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * &lt;/ul&gt;</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R29" data-line-number="29"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     *</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R30" data-line-number="30"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * <span class="pl-k">@param</span> pRequestMimeType the mimetype given in the request</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R31" data-line-number="31"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * <span class="pl-k">@param</span> defaultMimeType  the default mime type to use if none is given in the request</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R32" data-line-number="32"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * <span class="pl-k">@param</span> pCallback        a callback given (can be null)</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R33" data-line-number="33"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R34" data-line-number="34"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">String</span> <span class="pl-en">getResponseMimeType</span>(<span class="pl-smi">String</span> <span class="pl-v">pRequestMimeType</span>, <span class="pl-smi">String</span> <span class="pl-v">defaultMimeType</span>, <span class="pl-smi">String</span> <span class="pl-v">pCallback</span>) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R35" data-line-number="35"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R36" data-line-number="36"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-c"><span class="pl-c">//</span> For a valid given callback, return &quot;text/javascript&quot; for proper inclusion</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R37" data-line-number="37"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">if</span> (pCallback <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">&amp;&amp;</span> isValidCallback(pCallback)) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R38" data-line-number="38"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>text/javascript<span class="pl-pds">&quot;</span></span>;</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R39" data-line-number="39"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R40" data-line-number="40"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R41" data-line-number="41"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-c"><span class="pl-c">//</span> Pick up mime time from request, but sanitize</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R42" data-line-number="42"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">if</span> (pRequestMimeType <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R43" data-line-number="43"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-k">return</span> sanitize(pRequestMimeType);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R44" data-line-number="44"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R45" data-line-number="45"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R46" data-line-number="46"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-c"><span class="pl-c">//</span> Use the given default mime type (possibly picked up from a configuration)</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R47" data-line-number="47"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">return</span> sanitize(defaultMimeType);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R48" data-line-number="48"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R49" data-line-number="49"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R50" data-line-number="50"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-smi">String</span> <span class="pl-en">sanitize</span>(<span class="pl-smi">String</span> <span class="pl-v">mimeType</span>) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R51" data-line-number="51"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">for</span> (<span class="pl-smi">String</span> accepted <span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-smi">String</span>[]{</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R52" data-line-number="52"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-s"><span class="pl-pds">&quot;</span>application/json<span class="pl-pds">&quot;</span></span>,</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R53" data-line-number="53"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-s"><span class="pl-pds">&quot;</span>text/plain<span class="pl-pds">&quot;</span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R54" data-line-number="54"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        }) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R55" data-line-number="55"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-k">if</span> (accepted<span class="pl-k">.</span>equalsIgnoreCase(mimeType)) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R56" data-line-number="56"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                <span class="pl-k">return</span> accepted;</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R57" data-line-number="57"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R58" data-line-number="58"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R59" data-line-number="59"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>text/plain<span class="pl-pds">&quot;</span></span>;</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R60" data-line-number="60"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R61" data-line-number="61"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R62" data-line-number="62"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-c"><span class="pl-c">/**</span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R63" data-line-number="63"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * Check that a callback matches a javascript function name. The argument must be not null</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R64" data-line-number="64"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     *</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R65" data-line-number="65"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * <span class="pl-k">@param</span> pCallback callback to verify</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R66" data-line-number="66"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     * <span class="pl-k">@return</span> true if valud, false otherwise</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R67" data-line-number="67"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">     <span class="pl-c">*/</span></span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R68" data-line-number="68"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">boolean</span> <span class="pl-en">isValidCallback</span>(<span class="pl-smi">String</span> <span class="pl-v">pCallback</span>) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R69" data-line-number="69"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-smi">Pattern</span> validJavaScriptFunctionNamePattern <span class="pl-k">=</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R70" data-line-number="70"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-smi">Pattern</span><span class="pl-k">.</span>compile(<span class="pl-s"><span class="pl-pds">&quot;</span>^[$A-Z_][0-9A-Z_$]*$<span class="pl-pds">&quot;</span></span>, <span class="pl-smi">Pattern</span><span class="pl-c1"><span class="pl-k">.</span>CASE_INSENSITIVE</span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R71" data-line-number="71"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">return</span> validJavaScriptFunctionNamePattern<span class="pl-k">.</span>matcher(pCallback)<span class="pl-k">.</span>matches();</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R72" data-line-number="72"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R73" data-line-number="73"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-007269586489c44d181822c55f0e1019R74" data-line-number="74"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+}</span>

      <span class="no-nl-marker tooltipped tooltipped-n" aria-label="No newline at end of file">
        <svg class="octicon octicon-no-newline" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 5v3c0 .55-.45 1-1 1h-3v2L9 8l3-3v2h2V5h2zM8 8c0 2.2-1.8 4-4 4s-4-1.8-4-4 1.8-4 4-4 4 1.8 4 4zM1.5 9.66L5.66 5.5C5.18 5.19 4.61 5 4 5 2.34 5 1 6.34 1 8c0 .61.19 1.17.5 1.66zM7 8c0-.61-.19-1.17-.5-1.66L2.34 10.5c.48.31 1.05.5 1.66.5 1.66 0 3-1.34 3-3z"/></svg>
      </span>
  </td>
</tr>




          </table>
        </div>

  </div>
</div>

    
<a name="diff-bc0252c7193321fc76e84540196de5a2"></a>
<div id="diff-2"
     class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           ">
  <div class="file-header js-file-header" data-path="agent/core/src/test/java/org/jolokia/http/AgentServletTest.java" data-short-path="bc0252c" data-anchor="diff-bc0252c7193321fc76e84540196de5a2">
    <div class="file-actions">

        <span class="show-file-notes pt-1">
          <label>
            <input type="checkbox" checked="checked" class="js-toggle-file-notes">
            Show comments
          </label>
        </span>

          <a href="/rhuss/jolokia/blob/5895d5c137c335e6b473e9dcb9baf748851bbc5f/agent/core/src/test/java/org/jolokia/http/AgentServletTest.java" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 5895d5c ">View</a>


      <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true">
        <svg class="octicon octicon-chevron-down Details-content--shown" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z"/></svg>
        <svg class="octicon octicon-chevron-up Details-content--hidden" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z"/></svg>
      </button>
    </div>
    <div class="file-info">
        <span class="diffstat tooltipped tooltipped-e" aria-label="67 additions &amp; 3 deletions">70 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span></span>

      <a href="#diff-bc0252c7193321fc76e84540196de5a2" class="link-gray-dark"
         title="agent/core/src/test/java/org/jolokia/http/AgentServletTest.java">agent/core/src/test/java/org/jolokia/http/AgentServletTest.java</a>

      
    </div>
  </div>
  <div class="js-file-content Details-content--shown">

        <div class="data highlight js-blob-wrapper" style="overflow-x: auto">
          <table class="diff-table tab-size  " data-tab-size="8">
            
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bc0252c7193321fc76e84540196de5a2"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/a494725d566ef4423a7ca24eb73460e5eef1a657?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100755&amp;next_line_num_left=113&amp;next_line_num_right=113&amp;path=agent%2Fcore%2Fsrc%2Ftest%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServletTest.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7"
            data-left-range="1-112" data-right-range="1-112">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -113,7 +113,7 @@ public void configWithOverWrite() throws ServletException {</td>
  </tr>

    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L113" data-line-number="113"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R113" data-line-number="113"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L114" data-line-number="114"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R114" data-line-number="114"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L115" data-line-number="115"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R115" data-line-number="115"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">@Test</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L116" data-line-number="116"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en x x-first x-last">initWithcustomAccessRestrictor</span>() <span class="pl-k">throws</span> <span class="pl-smi">ServletException</span> {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R116" data-line-number="116"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en x x-first x-last">initWithCustomAccessRestrictor</span>() <span class="pl-k">throws</span> <span class="pl-smi">ServletException</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L117" data-line-number="117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R117" data-line-number="117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         prepareStandardInitialisation();</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L118" data-line-number="118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R118" data-line-number="118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         servlet<span class="pl-k">.</span>destroy();</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L119" data-line-number="119"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R119" data-line-number="119"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="9">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bc0252c7193321fc76e84540196de5a2"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/a494725d566ef4423a7ca24eb73460e5eef1a657?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100755&amp;next_line_num_left=251&amp;next_line_num_right=251&amp;path=agent%2Fcore%2Fsrc%2Ftest%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServletTest.java&amp;prev_line_num_left=119&amp;prev_line_num_right=119&amp;right_hunk_size=44"
            data-left-range="120-250" data-right-range="120-250">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -251,6 +251,44 @@ public void simpleGet() throws ServletException, IOException {</td>
  </tr>

    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L251" data-line-number="251"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R251" data-line-number="251"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         servlet<span class="pl-k">.</span>destroy();</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L252" data-line-number="252"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R252" data-line-number="252"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L253" data-line-number="253"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R253" data-line-number="253"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R254" data-line-number="254"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">@Test</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R255" data-line-number="255"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">simpleGetWithWrongMimeType</span>() <span class="pl-k">throws</span> <span class="pl-smi">ServletException</span>, <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R256" data-line-number="256"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        checkMimeTypes(<span class="pl-s"><span class="pl-pds">&quot;</span>text/html<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span>text/plain<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R257" data-line-number="257"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R258" data-line-number="258"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R259" data-line-number="259"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">@Test</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R260" data-line-number="260"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">simpleGetWithTextPlainMimeType</span>() <span class="pl-k">throws</span> <span class="pl-smi">ServletException</span>, <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R261" data-line-number="261"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        checkMimeTypes(<span class="pl-s"><span class="pl-pds">&quot;</span>text/plain<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span>text/plain<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R262" data-line-number="262"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R263" data-line-number="263"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R264" data-line-number="264"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">@Test</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R265" data-line-number="265"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">simpleGetWithApplicationJsonMimeType</span>() <span class="pl-k">throws</span> <span class="pl-smi">ServletException</span>, <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R266" data-line-number="266"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        checkMimeTypes(<span class="pl-s"><span class="pl-pds">&quot;</span>application/json<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span>application/json<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R267" data-line-number="267"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R268" data-line-number="268"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R269" data-line-number="269"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">checkMimeTypes</span>(<span class="pl-smi">String</span> <span class="pl-v">given</span>, <span class="pl-k">final</span> <span class="pl-smi">String</span> <span class="pl-v">expected</span>) <span class="pl-k">throws</span> <span class="pl-smi">ServletException</span>, <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R270" data-line-number="270"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        prepareStandardInitialisation();</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R271" data-line-number="271"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R272" data-line-number="272"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        initRequestResponseMocks(</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R273" data-line-number="273"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            getStandardRequestSetup(),</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R274" data-line-number="274"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-k">new</span> <span class="pl-smi">Runnable</span>() {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R275" data-line-number="275"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">run</span>() {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R276" data-line-number="276"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                    response<span class="pl-k">.</span>setCharacterEncoding(<span class="pl-s"><span class="pl-pds">&quot;</span>utf-8<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R277" data-line-number="277"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                    <span class="pl-c"><span class="pl-c">//</span> The default content type</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R278" data-line-number="278"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                    response<span class="pl-k">.</span>setContentType(expected);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R279" data-line-number="279"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                    response<span class="pl-k">.</span>setStatus(<span class="pl-c1">200</span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R280" data-line-number="280"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R281" data-line-number="281"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            });</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R282" data-line-number="282"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        expect(request<span class="pl-k">.</span>getPathInfo())<span class="pl-k">.</span>andReturn(<span class="pl-smi">HttpTestUtil</span><span class="pl-c1"><span class="pl-k">.</span>HEAP_MEMORY_GET_REQUEST</span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R283" data-line-number="283"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        expect(request<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue()))<span class="pl-k">.</span>andReturn(given);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R284" data-line-number="284"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        replay(request, response);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R285" data-line-number="285"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R286" data-line-number="286"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        servlet<span class="pl-k">.</span>doGet(request, response);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R287" data-line-number="287"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R288" data-line-number="288"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        verifyMocks();</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R289" data-line-number="289"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        servlet<span class="pl-k">.</span>destroy();</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R290" data-line-number="290"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R291" data-line-number="291"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L254" data-line-number="254"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R292" data-line-number="292"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">@Test</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L255" data-line-number="255"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R293" data-line-number="293"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">simpleGetWithNoReverseDnsLookupFalse</span>() <span class="pl-k">throws</span> <span class="pl-smi">ServletException</span>, <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L256" data-line-number="256"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R294" data-line-number="294"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         checkNoReverseDns(<span class="pl-c1">false</span>,<span class="pl-s"><span class="pl-pds">&quot;</span>127.0.0.1<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="54">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bc0252c7193321fc76e84540196de5a2"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/a494725d566ef4423a7ca24eb73460e5eef1a657?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100755&amp;next_line_num_left=484&amp;next_line_num_right=522&amp;path=agent%2Fcore%2Fsrc%2Ftest%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServletTest.java&amp;prev_line_num_left=256&amp;prev_line_num_right=294&amp;right_hunk_size=7"
            data-left-range="257-483" data-right-range="295-521">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -484,6 +522,7 @@ public void run() {</td>
  </tr>

    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L484" data-line-number="484"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R522" data-line-number="522"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 });</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L485" data-line-number="485"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R523" data-line-number="523"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         expect(request<span class="pl-k">.</span>getPathInfo())<span class="pl-k">.</span>andReturn(<span class="pl-smi">HttpTestUtil</span><span class="pl-c1"><span class="pl-k">.</span>HEAP_MEMORY_GET_REQUEST</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L486" data-line-number="486"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R524" data-line-number="524"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         expect(request<span class="pl-k">.</span>getAttribute(<span class="pl-s"><span class="pl-pds">&quot;</span>subject<span class="pl-pds">&quot;</span></span>))<span class="pl-k">.</span>andReturn(<span class="pl-c1">null</span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R525" data-line-number="525"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        expect(request<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue()))<span class="pl-k">.</span>andReturn(<span class="pl-c1">null</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L487" data-line-number="487"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R526" data-line-number="526"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L488" data-line-number="488"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R527" data-line-number="527"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         replay(request, response);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L489" data-line-number="489"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R528" data-line-number="528"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="62">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bc0252c7193321fc76e84540196de5a2"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/a494725d566ef4423a7ca24eb73460e5eef1a657?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100755&amp;next_line_num_left=493&amp;next_line_num_right=532&amp;path=agent%2Fcore%2Fsrc%2Ftest%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServletTest.java&amp;prev_line_num_left=489&amp;prev_line_num_right=528&amp;right_hunk_size=30"
            data-left-range="490-492" data-right-range="529-531">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -493,6 +532,30 @@ public void run() {</td>
  </tr>

    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L493" data-line-number="493"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R532" data-line-number="532"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         servlet<span class="pl-k">.</span>destroy();</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L494" data-line-number="494"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R533" data-line-number="533"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L495" data-line-number="495"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R534" data-line-number="534"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R535" data-line-number="535"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">@Test</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R536" data-line-number="536"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">withInvalidCallback</span>() <span class="pl-k">throws</span> <span class="pl-smi">IOException</span>, <span class="pl-smi">ServletException</span> {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R537" data-line-number="537"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        servlet <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">AgentServlet</span>(<span class="pl-k">new</span> <span class="pl-smi">AllowAllRestrictor</span>());</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R538" data-line-number="538"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        initConfigMocks(<span class="pl-c1">null</span>, <span class="pl-c1">null</span>,<span class="pl-s"><span class="pl-pds">&quot;</span>Error 400<span class="pl-pds">&quot;</span></span>, <span class="pl-smi">IllegalArgumentException</span><span class="pl-k">.</span>class);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R539" data-line-number="539"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        replay(config, context);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R540" data-line-number="540"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        servlet<span class="pl-k">.</span>init(config);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R541" data-line-number="541"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-smi">ByteArrayOutputStream</span> sw <span class="pl-k">=</span> initRequestResponseMocks(</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R542" data-line-number="542"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-s"><span class="pl-pds">&quot;</span>doSomethingEvil(); myCallback<span class="pl-pds">&quot;</span></span>,</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R543" data-line-number="543"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            getStandardRequestSetup(),</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R544" data-line-number="544"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            getStandardResponseSetup());</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R545" data-line-number="545"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        expect(request<span class="pl-k">.</span>getPathInfo())<span class="pl-k">.</span>andReturn(<span class="pl-smi">HttpTestUtil</span><span class="pl-c1"><span class="pl-k">.</span>HEAP_MEMORY_GET_REQUEST</span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R546" data-line-number="546"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        expect(request<span class="pl-k">.</span>getAttribute(<span class="pl-s"><span class="pl-pds">&quot;</span>subject<span class="pl-pds">&quot;</span></span>))<span class="pl-k">.</span>andReturn(<span class="pl-c1">null</span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R547" data-line-number="547"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        expect(request<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue()))<span class="pl-k">.</span>andReturn(<span class="pl-c1">null</span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R548" data-line-number="548"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R549" data-line-number="549"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        replay(request, response);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R550" data-line-number="550"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R551" data-line-number="551"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        servlet<span class="pl-k">.</span>doGet(request, response);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R552" data-line-number="552"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-smi">String</span> resp <span class="pl-k">=</span> sw<span class="pl-k">.</span>toString();</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R553" data-line-number="553"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        assertTrue(resp<span class="pl-k">.</span>contains(<span class="pl-s"><span class="pl-pds">&quot;</span>error_type<span class="pl-pds">&quot;</span></span>));</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R554" data-line-number="554"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        assertTrue(resp<span class="pl-k">.</span>contains(<span class="pl-s"><span class="pl-pds">&quot;</span>IllegalArgumentException<span class="pl-pds">&quot;</span></span>));</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R555" data-line-number="555"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        assertTrue(resp<span class="pl-k">.</span>matches(<span class="pl-s"><span class="pl-pds">&quot;</span>.*status.*400.*<span class="pl-pds">&quot;</span></span>));</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R556" data-line-number="556"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        servlet<span class="pl-k">.</span>destroy();</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R557" data-line-number="557"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R558" data-line-number="558"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L496" data-line-number="496"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R559" data-line-number="559"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">@Test</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L497" data-line-number="497"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R560" data-line-number="560"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">withException</span>() <span class="pl-k">throws</span> <span class="pl-smi">ServletException</span>, <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L498" data-line-number="498"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R561" data-line-number="561"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         servlet <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">AgentServlet</span>(<span class="pl-k">new</span> <span class="pl-smi">AllowAllRestrictor</span>());</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="93">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bc0252c7193321fc76e84540196de5a2"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/a494725d566ef4423a7ca24eb73460e5eef1a657?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100755&amp;next_line_num_left=606&amp;next_line_num_right=669&amp;path=agent%2Fcore%2Fsrc%2Ftest%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServletTest.java&amp;prev_line_num_left=498&amp;prev_line_num_right=561&amp;right_hunk_size=7"
            data-left-range="499-605" data-right-range="562-668">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -606,7 +669,7 @@ private ByteArrayOutputStream initRequestResponseMocks(String callback,Runnable</td>
  </tr>

    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L606" data-line-number="606"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R669" data-line-number="669"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         response <span class="pl-k">=</span> createMock(<span class="pl-smi">HttpServletResponse</span><span class="pl-k">.</span>class);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L607" data-line-number="607"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R670" data-line-number="670"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         setNoCacheHeaders(response);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L608" data-line-number="608"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R671" data-line-number="671"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L609" data-line-number="609"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        expect(request<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue()))<span class="pl-k">.</span>andReturn(callback);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R672" data-line-number="672"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        expect(request<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue()))<span class="pl-k">.</span>andReturn(callback)<span class="pl-k x x-first">.</span><span class="x x-last">anyTimes()</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L610" data-line-number="610"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R673" data-line-number="673"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         requestSetup<span class="pl-k">.</span>run();</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L611" data-line-number="611"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R674" data-line-number="674"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         responseSetup<span class="pl-k">.</span>run();</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L612" data-line-number="612"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R675" data-line-number="675"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="102">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bc0252c7193321fc76e84540196de5a2"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/a494725d566ef4423a7ca24eb73460e5eef1a657?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100755&amp;next_line_num_left=648&amp;next_line_num_right=711&amp;path=agent%2Fcore%2Fsrc%2Ftest%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServletTest.java&amp;prev_line_num_left=612&amp;prev_line_num_right=675&amp;right_hunk_size=7"
            data-left-range="613-647" data-right-range="676-710">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -648,6 +711,7 @@ private Runnable getStandardResponseSetup() {</td>
  </tr>

    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L648" data-line-number="648"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R711" data-line-number="711"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Runnable</span>() {</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L649" data-line-number="649"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R712" data-line-number="712"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">run</span>() {</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L650" data-line-number="650"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R713" data-line-number="713"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 response<span class="pl-k">.</span>setCharacterEncoding(<span class="pl-s"><span class="pl-pds">&quot;</span>utf-8<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R714" data-line-number="714"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                <span class="pl-c"><span class="pl-c">//</span> The default content type</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L651" data-line-number="651"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R715" data-line-number="715"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 response<span class="pl-k">.</span>setContentType(<span class="pl-s"><span class="pl-pds">&quot;</span>text/plain<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L652" data-line-number="652"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R716" data-line-number="716"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 response<span class="pl-k">.</span>setStatus(<span class="pl-c1">200</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L653" data-line-number="653"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R717" data-line-number="717"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             }</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="110">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bc0252c7193321fc76e84540196de5a2"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/a494725d566ef4423a7ca24eb73460e5eef1a657?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100755&amp;next_line_num_left=690&amp;next_line_num_right=754&amp;path=agent%2Fcore%2Fsrc%2Ftest%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServletTest.java&amp;prev_line_num_left=653&amp;prev_line_num_right=717&amp;right_hunk_size=7"
            data-left-range="654-689" data-right-range="718-753">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -690,7 +754,7 @@ public void run() {</td>
  </tr>

    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L690" data-line-number="690"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R754" data-line-number="754"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 expect(request<span class="pl-k">.</span>getAttribute(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>JAAS_SUBJECT_REQUEST_ATTRIBUTE</span>))<span class="pl-k">.</span>andReturn(<span class="pl-c1">null</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L691" data-line-number="691"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R755" data-line-number="755"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L692" data-line-number="692"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R756" data-line-number="756"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 expect(request<span class="pl-k">.</span>getPathInfo())<span class="pl-k">.</span>andReturn(<span class="pl-smi">HttpTestUtil</span><span class="pl-c1"><span class="pl-k">.</span>HEAP_MEMORY_GET_REQUEST</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L693" data-line-number="693"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-                expect(request<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue()))<span class="pl-k">.</span>andReturn(<span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R757" data-line-number="757"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                expect(request<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue()))<span class="pl-k">.</span>andReturn(<span class="pl-s"><span class="pl-pds">"</span>text/plain<span class="pl-pds">"</span></span>)<span class="pl-k x x-first">.</span><span class="x x-last">anyTimes()</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L694" data-line-number="694"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R758" data-line-number="758"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 <span class="pl-smi">StringBuffer</span> buf <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">StringBuffer</span>();</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L695" data-line-number="695"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R759" data-line-number="759"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 buf<span class="pl-k">.</span>append(url)<span class="pl-k">.</span>append(<span class="pl-smi">HttpTestUtil</span><span class="pl-c1"><span class="pl-k">.</span>HEAP_MEMORY_GET_REQUEST</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-bc0252c7193321fc76e84540196de5a2L696" data-line-number="696"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bc0252c7193321fc76e84540196de5a2R760" data-line-number="760"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 expect(request<span class="pl-k">.</span>getRequestURL())<span class="pl-k">.</span>andReturn(buf);</span>

  </td>
</tr>



  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-bc0252c7193321fc76e84540196de5a2"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/rhuss/jolokia/blob_excerpt/a494725d566ef4423a7ca24eb73460e5eef1a657?diff=unified&amp;in_wiki_context=&amp;mode=100755&amp;path=agent%2Fcore%2Fsrc%2Ftest%2Fjava%2Forg%2Fjolokia%2Fhttp%2FAgentServletTest.java&amp;prev_line_num_left=696&amp;prev_line_num_right=760"
          data-left-range="697-772"
          data-right-range="761-772">
       <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

          </table>
        </div>

  </div>
</div>

    
<a name="diff-8e2154b44ca806ec617481776bb63e4d"></a>
<div id="diff-3"
     class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           ">
  <div class="file-header js-file-header" data-path="agent/jvm/src/main/java/org/jolokia/jvmagent/handler/JolokiaHttpHandler.java" data-short-path="8e2154b" data-anchor="diff-8e2154b44ca806ec617481776bb63e4d">
    <div class="file-actions">

        <span class="show-file-notes pt-1">
          <label>
            <input type="checkbox" checked="checked" class="js-toggle-file-notes">
            Show comments
          </label>
        </span>

          <a href="/rhuss/jolokia/blob/5895d5c137c335e6b473e9dcb9baf748851bbc5f/agent/jvm/src/main/java/org/jolokia/jvmagent/handler/JolokiaHttpHandler.java" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 5895d5c ">View</a>


      <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true">
        <svg class="octicon octicon-chevron-down Details-content--shown" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6l-5 5z"/></svg>
        <svg class="octicon octicon-chevron-up Details-content--hidden" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5 5 5z"/></svg>
      </button>
    </div>
    <div class="file-info">
        <span class="diffstat tooltipped tooltipped-e" aria-label="19 additions &amp; 13 deletions">32 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span></span>

      <a href="#diff-8e2154b44ca806ec617481776bb63e4d" class="link-gray-dark"
         title="agent/jvm/src/main/java/org/jolokia/jvmagent/handler/JolokiaHttpHandler.java">agent/jvm/src/main/java/org/jolokia/jvmagent/handler/JolokiaHttpHandler.java</a>

      
    </div>
  </div>
  <div class="js-file-content Details-content--shown">

        <div class="data highlight js-blob-wrapper" style="overflow-x: auto">
          <table class="diff-table tab-size  " data-tab-size="8">
            
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8e2154b44ca806ec617481776bb63e4d"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/83eb64d91dca913435604cedfc31724d99101b46?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=224&amp;next_line_num_right=224&amp;path=agent%2Fjvm%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fjvmagent%2Fhandler%2FJolokiaHttpHandler.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=9"
            data-left-range="1-223" data-right-range="1-223">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -224,6 +224,9 @@ public void doHandle(HttpExchange pExchange) throws IOException {</td>
  </tr>

    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL224" data-line-number="224"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR224" data-line-number="224"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                                        extractOriginOrReferer(pExchange));</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL225" data-line-number="225"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR225" data-line-number="225"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             <span class="pl-smi">String</span> method <span class="pl-k">=</span> pExchange<span class="pl-k">.</span>getRequestMethod();</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL226" data-line-number="226"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR226" data-line-number="226"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR227" data-line-number="227"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-c"><span class="pl-c">//</span> If a callback is given, check this is a valid javascript function name</span></span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR228" data-line-number="228"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            validateCallbackIfGiven(parsedUri);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR229" data-line-number="229"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL227" data-line-number="227"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR230" data-line-number="230"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             <span class="pl-c"><span class="pl-c">//</span> Dispatch for the proper HTTP request method</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL228" data-line-number="228"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR231" data-line-number="231"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             <span class="pl-k">if</span> (<span class="pl-s"><span class="pl-pds">&quot;</span>GET<span class="pl-pds">&quot;</span></span><span class="pl-k">.</span>equalsIgnoreCase(method)) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL229" data-line-number="229"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR232" data-line-number="232"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 setHeaders(pExchange);</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="10">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8e2154b44ca806ec617481776bb63e4d"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/83eb64d91dca913435604cedfc31724d99101b46?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=244&amp;next_line_num_right=247&amp;path=agent%2Fjvm%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fjvmagent%2Fhandler%2FJolokiaHttpHandler.java&amp;prev_line_num_left=229&amp;prev_line_num_right=232&amp;right_hunk_size=14"
            data-left-range="230-243" data-right-range="233-246">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -244,6 +247,14 @@ public void doHandle(HttpExchange pExchange) throws IOException {</td>
  </tr>

    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL244" data-line-number="244"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR247" data-line-number="247"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         }</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL245" data-line-number="245"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR248" data-line-number="248"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL246" data-line-number="246"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR249" data-line-number="249"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR250" data-line-number="250"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR251" data-line-number="251"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    <span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">validateCallbackIfGiven</span>(<span class="pl-smi">ParsedUri</span> <span class="pl-v">pUri</span>) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR252" data-line-number="252"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-smi">String</span> callback <span class="pl-k">=</span> pUri<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR253" data-line-number="253"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">if</span> (callback <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">&amp;&amp;</span> <span class="pl-k">!</span><span class="pl-smi">MimeTypeUtil</span><span class="pl-k">.</span>isValidCallback(callback)) {</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR254" data-line-number="254"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">IllegalArgumentException</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>Invalid callback name given, which must be a valid javascript function name<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR255" data-line-number="255"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR256" data-line-number="256"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+    }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR257" data-line-number="257"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL247" data-line-number="247"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR258" data-line-number="258"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-c"><span class="pl-c">//</span> ========================================================================</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL248" data-line-number="248"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR259" data-line-number="259"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL249" data-line-number="249"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR260" data-line-number="260"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-c"><span class="pl-c">//</span> Used for checking origin or referer is an origin policy is enabled</span></span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="25">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8e2154b44ca806ec617481776bb63e4d"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/83eb64d91dca913435604cedfc31724d99101b46?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=10&amp;mode=100644&amp;next_line_num_left=342&amp;next_line_num_right=353&amp;path=agent%2Fjvm%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fjvmagent%2Fhandler%2FJolokiaHttpHandler.java&amp;prev_line_num_left=249&amp;prev_line_num_right=260&amp;right_hunk_size=11"
            data-left-range="250-341" data-right-range="261-352">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -342,10 +353,11 @@ private void sendStreamingResponse(HttpExchange pExchange, ParsedUri pParsedUri,</td>
  </tr>

    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL342" data-line-number="342"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR353" data-line-number="353"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-smi">Headers</span> headers <span class="pl-k">=</span> pExchange<span class="pl-k">.</span>getResponseHeaders();</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL343" data-line-number="343"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR354" data-line-number="354"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         <span class="pl-k">if</span> (pJson <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL344" data-line-number="344"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR355" data-line-number="355"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             headers<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">&quot;</span>Content-Type<span class="pl-pds">&quot;</span></span>, getMimeType(pParsedUri) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&quot;</span>; charset=utf-8<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL345" data-line-number="345"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-smi">String</span> callback <span class="pl-k">=</span> pParsedUri<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL346" data-line-number="346"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR356" data-line-number="356"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             pExchange<span class="pl-k">.</span>sendResponseHeaders(<span class="pl-c1">200</span>, <span class="pl-c1">0</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL347" data-line-number="347"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR357" data-line-number="357"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             <span class="pl-smi">Writer</span> writer <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">OutputStreamWriter</span>(pExchange<span class="pl-k">.</span>getResponseBody(), <span class="pl-s"><span class="pl-pds">&quot;</span>UTF-8<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL348" data-line-number="348"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-smi">IoUtil</span><span class="pl-k">.</span>streamResponseAndClose(writer, pJson, callback);</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR358" data-line-number="358"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR359" data-line-number="359"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-smi">String</span> callback <span class="pl-k">=</span> pParsedUri<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR360" data-line-number="360"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-smi">IoUtil</span><span class="pl-k">.</span>streamResponseAndClose(writer, pJson, callback <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">&amp;&amp;</span> <span class="pl-smi">MimeTypeUtil</span><span class="pl-k">.</span>isValidCallback(callback) <span class="pl-k">?</span> callback <span class="pl-k">:</span> <span class="pl-c1">null</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL349" data-line-number="349"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR361" data-line-number="361"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">         } <span class="pl-k">else</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL350" data-line-number="350"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR362" data-line-number="362"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             headers<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">&quot;</span>Content-Type<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span>text/plain<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL351" data-line-number="351"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR363" data-line-number="363"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">             pExchange<span class="pl-k">.</span>sendResponseHeaders(<span class="pl-c1">200</span>,<span class="pl-k">-</span><span class="pl-c1">1</span>);</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="39">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8e2154b44ca806ec617481776bb63e4d"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/83eb64d91dca913435604cedfc31724d99101b46?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=360&amp;next_line_num_right=372&amp;path=agent%2Fjvm%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fjvmagent%2Fhandler%2FJolokiaHttpHandler.java&amp;prev_line_num_left=351&amp;prev_line_num_right=363&amp;right_hunk_size=7"
            data-left-range="352-359" data-right-range="364-371">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -360,7 +372,7 @@ private void sendAllJSON(HttpExchange pExchange, ParsedUri pParsedUri, JSONAware</td>
  </tr>

    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL360" data-line-number="360"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR372" data-line-number="372"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 headers<span class="pl-k">.</span>set(<span class="pl-s"><span class="pl-pds">&quot;</span>Content-Type<span class="pl-pds">&quot;</span></span>, getMimeType(pParsedUri) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&quot;</span>; charset=utf-8<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL361" data-line-number="361"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR373" data-line-number="373"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 <span class="pl-smi">String</span> json <span class="pl-k">=</span> pJson<span class="pl-k">.</span>toJSONString();</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL362" data-line-number="362"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR374" data-line-number="374"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 <span class="pl-smi">String</span> callback <span class="pl-k">=</span> pParsedUri<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL363" data-line-number="363"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-                <span class="pl-smi">String</span> content <span class="pl-k">=</span> callback <span class="pl-k x x-first x-last">==</span> <span class="pl-c1">null</span> <span class="pl-k x x-first">?</span><span class="x"> json </span><span class="pl-k x x-last">:</span> callback <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>(<span class="pl-pds">"</span></span> <span class="pl-k">+</span> json <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>);<span class="pl-pds">"</span></span>;</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR375" data-line-number="375"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+                <span class="pl-smi">String</span> content <span class="pl-k">=</span> callback <span class="pl-k x x-first x-last">!=</span> <span class="pl-c1">null</span> <span class="pl-k x x-first">&amp;&amp;</span><span class="x"> </span><span class="pl-smi x">MimeTypeUtil</span><span class="pl-k x">.</span><span class="x">isValidCallback(callback) </span><span class="pl-k x x-last">?</span> callback <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>(<span class="pl-pds">"</span></span> <span class="pl-k">+</span> json <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>);<span class="pl-pds">"</span></span><span class="x x-first"> </span><span class="pl-k x">:</span><span class="x x-last"> json</span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL364" data-line-number="364"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR376" data-line-number="376"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 <span class="pl-k">byte</span>[] response <span class="pl-k">=</span> content<span class="pl-k">.</span>getBytes(<span class="pl-s"><span class="pl-pds">&quot;</span>UTF8<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL365" data-line-number="365"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR377" data-line-number="377"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 pExchange<span class="pl-k">.</span>sendResponseHeaders(<span class="pl-c1">200</span>,response<span class="pl-k">.</span>length);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL366" data-line-number="366"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR378" data-line-number="378"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">                 out <span class="pl-k">=</span> pExchange<span class="pl-k">.</span>getResponseBody();</span>

  </td>
</tr>



      <tr class="js-expandable-line" data-position="48">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8e2154b44ca806ec617481776bb63e4d"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/rhuss/jolokia/blob_excerpt/83eb64d91dca913435604cedfc31724d99101b46?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=16&amp;mode=100644&amp;next_line_num_left=380&amp;next_line_num_right=392&amp;path=agent%2Fjvm%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fjvmagent%2Fhandler%2FJolokiaHttpHandler.java&amp;prev_line_num_left=366&amp;prev_line_num_right=378&amp;right_hunk_size=10"
            data-left-range="367-379" data-right-range="379-391">
        <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -380,16 +392,10 @@ private void sendAllJSON(HttpExchange pExchange, ParsedUri pParsedUri, JSONAware</td>
  </tr>

    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL380" data-line-number="380"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR392" data-line-number="392"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL381" data-line-number="381"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR393" data-line-number="393"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-c"><span class="pl-c">//</span> Get the proper mime type according to configuration</span></span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL382" data-line-number="382"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR394" data-line-number="394"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-k">private</span> <span class="pl-smi">String</span> <span class="pl-en">getMimeType</span>(<span class="pl-smi">ParsedUri</span> <span class="pl-v">pParsedUri</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL383" data-line-number="383"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        <span class="pl-k">if</span> (pParsedUri<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue()) <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL384" data-line-number="384"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>text/javascript<span class="pl-pds">&quot;</span></span>;</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL385" data-line-number="385"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        } <span class="pl-k">else</span> {</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL386" data-line-number="386"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-smi">String</span> mimeType <span class="pl-k">=</span> pParsedUri<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue());</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL387" data-line-number="387"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-k">if</span> (mimeType <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL388" data-line-number="388"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-                <span class="pl-k">return</span> mimeType;</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL389" data-line-number="389"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            }</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL390" data-line-number="390"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            mimeType <span class="pl-k">=</span> configuration<span class="pl-k">.</span>get(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span>);</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL391" data-line-number="391"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-k">return</span> mimeType <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">?</span> mimeType <span class="pl-k">:</span> <span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getDefaultValue();</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL392" data-line-number="392"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        }</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR395" data-line-number="395"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+        <span class="pl-k">return</span> <span class="pl-smi">MimeTypeUtil</span><span class="pl-k">.</span>getResponseMimeType(</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR396" data-line-number="396"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            pParsedUri<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span><span class="pl-k">.</span>getKeyValue()),</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR397" data-line-number="397"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            configuration<span class="pl-k">.</span>get(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>MIME_TYPE</span>),</span>

  </td>
</tr>



    <tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR398" data-line-number="398"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            pParsedUri<span class="pl-k">.</span>getParameter(<span class="pl-smi">ConfigKey</span><span class="pl-c1"><span class="pl-k">.</span>CALLBACK</span><span class="pl-k">.</span>getKeyValue()));</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL393" data-line-number="393"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR399" data-line-number="399"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     }</span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL394" data-line-number="394"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR400" data-line-number="400"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



    <tr>
    <td id="diff-8e2154b44ca806ec617481776bb63e4dL395" data-line-number="395"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8e2154b44ca806ec617481776bb63e4dR401" data-line-number="401"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner">     <span class="pl-c"><span class="pl-c">//</span> Creat a log handler from either the given class or by creating a default log handler printing</span></span>

  </td>
</tr>



  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-8e2154b44ca806ec617481776bb63e4d"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/rhuss/jolokia/blob_excerpt/83eb64d91dca913435604cedfc31724d99101b46?diff=unified&amp;in_wiki_context=&amp;mode=100644&amp;path=agent%2Fjvm%2Fsrc%2Fmain%2Fjava%2Forg%2Fjolokia%2Fjvmagent%2Fhandler%2FJolokiaHttpHandler.java&amp;prev_line_num_left=395&amp;prev_line_num_right=401"
          data-left-range="396-417"
          data-right-range="402-417">
       <svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

          </table>
        </div>

  </div>
</div>

  </div>

    <div class="js-diff-progressive-container">
  <include-fragment src="/rhuss/jolokia/diffs?bytes=15619&amp;commit=5895d5c137c335e6b473e9dcb9baf748851bbc5f&amp;lines=345&amp;sha1=557c23edec6b1321fac9bf73239e6cadfda77a07&amp;sha2=5895d5c137c335e6b473e9dcb9baf748851bbc5f&amp;start_entry=4" class="diff-progressive-loader js-diff-progressive-loader mb-4 d-flex flex-items-center flex-justify-center">
    <img alt="" class="js-diff-progressive-spinner" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-128.gif" width="64" height="64" />

    <div class="js-diff-progressive-retry d-none">
      <svg class="octicon octicon-alert text-red mr-1" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
      Oops, something went wrong.
      <button type="button" class="btn-link js-retry-button">Retry</button>
    </div>
  </include-fragment>
</div>

</div>

<button type="button" class="js-toggle-all-file-notes" data-hotkey="i" style="display:none">Toggle all file notes</button>

<svg aria-hidden="true" width="340px" height="84px" viewBox="0 0 340 84" version="1.1"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  class="diff-placeholder-svg position-absolute bottom-0">
  <defs>
    <clippath id="diff-placeholder">
      <rect x="0" y="0" width="67.0175439" height="11.9298746" rx="2"></rect>
      <rect x="18.9473684" y="47.7194983" width="100.701754" height="11.9298746" rx="2"></rect>
      <rect x="0" y="71.930126" width="37.8947368" height="11.9298746" rx="2"></rect>
      <rect x="127.017544" y="48.0703769" width="53.3333333" height="11.9298746" rx="2"></rect>
      <rect x="187.719298" y="48.0703769" width="72.9824561" height="11.9298746" rx="2"></rect>
      <rect x="76.8421053" y="0" width="140.350877" height="11.9298746" rx="2"></rect>
      <rect x="17.8947368" y="23.8597491" width="140.350877" height="11.9298746" rx="2"></rect>
      <rect x="166.315789" y="23.8597491" width="173.684211" height="11.9298746" rx="2"></rect>
    </clippath>

    <linearGradient id="animated-diff-gradient" x1="0" x2="0" y1="0" y2="1" spreadMethod="reflect">
      <stop offset="0" stop-color="#eee"></stop>
      <stop offset="0.2" stop-color="#eee"></stop>
      <stop offset="0.5" stop-color="#ddd"></stop>
      <stop offset="0.8" stop-color="#eee"></stop>
      <stop offset="1" stop-color="#eee"></stop>
      <animateTransform attributeName="y1" values="0%; 100%; 0" dur="1s" repeatCount="3"></animateTransform>
      <animateTransform attributeName="y2" values="100%; 200%; 0" dur="1s" repeatCount="3"></animateTransform>
    </linearGradient>
  </defs>
</svg>



  <div id="all_commit_comments" class="js-quote-selection-container ">

    <div class="commit-comments-heading">
      
<div id="partial-visible-comments-header">
  <span class="float-right">
    
  </span>

  <h4 class="commit-comment-count">
    5 comments
    on commit <code class="commit-sha">5895d5c</code>
  </h4>

</div>

    </div>

    <div id="comments" class="comment-holder">
      

  <div class="timeline-comment-wrapper js-comment-container">


    

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="36941976" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/r00t4dm"><img class="avatar rounded-1" height="44" width="44" alt="@r00t4dm" src="https://avatars3.githubusercontent.com/u/36941976?s=88&amp;v=4" /></a>

</div>

    
<div class="js-minimizable-comment-group">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="3344b9762aa0907b02760ad244537e24">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <span class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</span>
        <span class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</span>
      </div>
    </summary>
    <div class="border-top">
      <div class="review-comment previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            







<!-- Closes div if we are showing the kebab menu -->

          </div>
            <a class="float-left mt-1" data-hovercard-user-id="36941976" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/r00t4dm"><img class="avatar" height="28" width="28" alt="@r00t4dm" src="https://avatars2.githubusercontent.com/u/36941976?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="36941976" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/r00t4dm">r00t4dm</a>
  

              </strong>
              <span class="text-gray">
                  <relative-time datetime="2018-03-15T09:05:07Z">Mar 15, 2018</relative-time>
              </span>
            </h4>
            

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body">
                  <p>how can test the xss attack?</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div id="commitcomment-28100748"
       class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="3344b9762aa0907b02760ad244537e24">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    







<!-- Closes div if we are showing the kebab menu -->

  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="36941976" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/r00t4dm">r00t4dm</a>
  

    </strong>

    replied

    <a href="#commitcomment-28100748" class="timestamp"><relative-time datetime="2018-03-15T09:05:07Z">Mar 15, 2018</relative-time></a>


  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>how can test the xss attack?</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">


    

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss"><img class="avatar rounded-1" height="44" width="44" alt="@rhuss" src="https://avatars2.githubusercontent.com/u/99080?s=88&amp;v=4" /></a>

</div>

    
<div class="js-minimizable-comment-group">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="ca0e5124ff9cd5d7b27df54c03c5f95b">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <span class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</span>
        <span class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</span>
      </div>
    </summary>
    <div class="border-top">
      <div class="review-comment previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            







<!-- Closes div if we are showing the kebab menu -->

          </div>
            <a class="float-left mt-1" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss"><img class="avatar" height="28" width="28" alt="@rhuss" src="https://avatars3.githubusercontent.com/u/99080?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss">rhuss</a>
  

              </strong>
              <span class="text-gray">
                  <relative-time datetime="2018-03-17T11:14:46Z">Mar 17, 2018</relative-time>
              </span>
            </h4>
            
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is the owner of the jolokia repository.">
      Owner
    </span>

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body">
                  <p>The XSS attack happens only when you are using the Jolokia response directly in an browser and when you set the mimeType to e.g. text/html and provoke an error with an error message containing html code. But as you normally consume Jolokia responses via some client lib (javascript or java) you are not directly affected normally. I.e. I dont know any app showing Jolokia JSON responses directly in the browser.</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div id="commitcomment-28137347"
       class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="ca0e5124ff9cd5d7b27df54c03c5f95b">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    







<!-- Closes div if we are showing the kebab menu -->

  </div>

    
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is the owner of the jolokia repository.">
      Owner
    </span>



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss">rhuss</a>
  

    </strong>

    replied

    <a href="#commitcomment-28137347" class="timestamp"><relative-time datetime="2018-03-17T11:14:46Z">Mar 17, 2018</relative-time></a>


  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>The XSS attack happens only when you are using the Jolokia response directly in an browser and when you set the mimeType to e.g. text/html and provoke an error with an error message containing html code. But as you normally consume Jolokia responses via some client lib (javascript or java) you are not directly affected normally. I.e. I dont know any app showing Jolokia JSON responses directly in the browser.</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">


    

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/adioss"><img class="avatar rounded-1" height="44" width="44" alt="@adioss" src="https://avatars2.githubusercontent.com/u/579181?s=88&amp;v=4" /></a>

</div>

    
<div class="js-minimizable-comment-group">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="60d8940934f6516bd3e1601a39c9d660">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <span class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</span>
        <span class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</span>
      </div>
    </summary>
    <div class="border-top">
      <div class="review-comment previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            







<!-- Closes div if we are showing the kebab menu -->

          </div>
            <a class="float-left mt-1" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/adioss"><img class="avatar" height="28" width="28" alt="@adioss" src="https://avatars3.githubusercontent.com/u/579181?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/adioss">adioss</a>
  

              </strong>
              <span class="text-gray">
                  <relative-time datetime="2018-04-19T10:29:23Z">Apr 19, 2018</relative-time>
              </span>
            </h4>
            

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body">
                  <p>Hello,<br>
I think that the CVE is not correctly declared so SCA/dependency analyser (like dependency-check) are not able to detect it.<br>
See <a href="https://nvd.nist.gov/vuln/detail/CVE-2018-1000129" rel="nofollow">https://nvd.nist.gov/vuln/detail/CVE-2018-1000129</a><br>
<code>Configuration 1 OR cpe:2.3:a:jolokia:jolokia:1.3.7:*:*:*:*:*:*:*</code><br>
Only version 1.3.7 will be detected. I think it should be something like:<br>
<code>cpe:2.3:a:jolokia:jolokia:*:*:*:*:*:*:*:* versions up to (excluding) 1.5.0</code></p>
<ul>
<li>do you know how to update it? who could be contacted to solve that?</li>
<li>same issue with: <a href="https://nvd.nist.gov/vuln/detail/CVE-2018-1000130" rel="nofollow">https://nvd.nist.gov/vuln/detail/CVE-2018-1000130</a></li>
</ul>
<p>Thanks,</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div id="commitcomment-28651104"
       class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="60d8940934f6516bd3e1601a39c9d660">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    







<!-- Closes div if we are showing the kebab menu -->

  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/adioss">adioss</a>
  

    </strong>

    replied

    <a href="#commitcomment-28651104" class="timestamp"><relative-time datetime="2018-04-19T10:29:23Z">Apr 19, 2018</relative-time></a>


  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>Hello,<br>
I think that the CVE is not correctly declared so SCA/dependency analyser (like dependency-check) are not able to detect it.<br>
See <a href="https://nvd.nist.gov/vuln/detail/CVE-2018-1000129" rel="nofollow">https://nvd.nist.gov/vuln/detail/CVE-2018-1000129</a><br>
<code>Configuration 1 OR cpe:2.3:a:jolokia:jolokia:1.3.7:*:*:*:*:*:*:*</code><br>
Only version 1.3.7 will be detected. I think it should be something like:<br>
<code>cpe:2.3:a:jolokia:jolokia:*:*:*:*:*:*:*:* versions up to (excluding) 1.5.0</code></p>
<ul>
<li>do you know how to update it? who could be contacted to solve that?</li>
<li>same issue with: <a href="https://nvd.nist.gov/vuln/detail/CVE-2018-1000130" rel="nofollow">https://nvd.nist.gov/vuln/detail/CVE-2018-1000130</a></li>
</ul>
<p>Thanks,</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">


    

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss"><img class="avatar rounded-1" height="44" width="44" alt="@rhuss" src="https://avatars2.githubusercontent.com/u/99080?s=88&amp;v=4" /></a>

</div>

    
<div class="js-minimizable-comment-group">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="9afc4c600fd54cb359542546b0f964d5">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <span class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</span>
        <span class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</span>
      </div>
    </summary>
    <div class="border-top">
      <div class="review-comment previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            







<!-- Closes div if we are showing the kebab menu -->

          </div>
            <a class="float-left mt-1" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss"><img class="avatar" height="28" width="28" alt="@rhuss" src="https://avatars3.githubusercontent.com/u/99080?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss">rhuss</a>
  

              </strong>
              <span class="text-gray">
                  <relative-time datetime="2018-04-19T10:38:56Z">Apr 19, 2018</relative-time>
              </span>
            </h4>
            
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is the owner of the jolokia repository.">
      Owner
    </span>

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body">
                  <p><a class="user-mention" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/adioss">@adioss</a> actually it was not me who opened the CVE but <a href="https://www.linkedin.com/in/mthopkins" rel="nofollow">Martin Hopkins</a> from GDS. I suggest that you contact him for the update ?</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div id="commitcomment-28651175"
       class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="9afc4c600fd54cb359542546b0f964d5">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    







<!-- Closes div if we are showing the kebab menu -->

  </div>

    
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is the owner of the jolokia repository.">
      Owner
    </span>



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/rhuss">rhuss</a>
  

    </strong>

    replied

    <a href="#commitcomment-28651175" class="timestamp"><relative-time datetime="2018-04-19T10:38:56Z">Apr 19, 2018</relative-time></a>


  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p><a class="user-mention" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/adioss">@adioss</a> actually it was not me who opened the CVE but <a href="https://www.linkedin.com/in/mthopkins" rel="nofollow">Martin Hopkins</a> from GDS. I suggest that you contact him for the update ?</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">


    

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/adioss"><img class="avatar rounded-1" height="44" width="44" alt="@adioss" src="https://avatars2.githubusercontent.com/u/579181?s=88&amp;v=4" /></a>

</div>

    
<div class="js-minimizable-comment-group">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="867ef46528ade4300362c0acff5d8227">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <span class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</span>
        <span class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</span>
      </div>
    </summary>
    <div class="border-top">
      <div class="review-comment previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            







<!-- Closes div if we are showing the kebab menu -->

          </div>
            <a class="float-left mt-1" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/adioss"><img class="avatar" height="28" width="28" alt="@adioss" src="https://avatars3.githubusercontent.com/u/579181?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/adioss">adioss</a>
  

              </strong>
              <span class="text-gray">
                  <relative-time datetime="2018-04-19T12:01:33Z">Apr 19, 2018</relative-time>
              </span>
            </h4>
            

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body">
                  <p><a class="user-mention" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/rhuss">@rhuss</a> I will do that. Thanks a lot for the great job that you do for this project.<br>
Adrien</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div id="commitcomment-28652257"
       class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="867ef46528ade4300362c0acff5d8227">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    







<!-- Closes div if we are showing the kebab menu -->

  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="579181" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/adioss">adioss</a>
  

    </strong>

    replied

    <a href="#commitcomment-28652257" class="timestamp"><relative-time datetime="2018-04-19T12:01:33Z">Apr 19, 2018</relative-time></a>


      
  <span class="d-inline-block text-gray-light">&#8226;</span>


  <details class="dropdown-details details-reset js-dropdown-details d-inline-block dropdown">
    <summary class="btn-link no-underline text-gray dropdown-toggle">
      <span>
          edited
      </span>
      <svg height="11" class="octicon octicon-triangle-down v-align-middle" viewBox="0 0 12 16" version="1.1" width="8" aria-hidden="true"><path fill-rule="evenodd" d="M0 5l6 6 6-6H0z"/></svg>
    </summary>

    <div class="anim-scale-in">
      <div class="dropdown-menu dropdown-menu-se py-0" style="width:352px">
        <div class="dropdown-header px-3 py-2 border-bottom">Edited 1 time</div>
        <ul class="bg-gray-light" style="overflow-y:auto; max-height:250px">
          <li class="border-bottom css-truncate">
              <div class="p-2 text-gray">                <img src="https://avatars0.githubusercontent.com/u/579181?v=4" width="20" height="20" class="avatar avatar-small v-align-middle" alt="@adioss">
                <span class="css-truncate-target v-align-middle text-bold text-small">adioss </span>
              <span class="v-align-middle text-small">edited <relative-time datetime="2018-04-19T12:01:53Z">Apr 19, 2018</relative-time></span>
</div>
          </li>
        </ul>
      </div>
    </div>
  </details>

  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p><a class="user-mention" data-hovercard-user-id="99080" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/rhuss">@rhuss</a> I will do that. Thanks a lot for the great job that you do for this project.<br>
Adrien</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>

  </div>

  <!-- Rendered timeline since 2018-04-19 05:01:33 -->
  <div id="partial-timeline-marker"
        class="js-timeline-marker js-socket-channel js-updatable-content"
        data-channel="repo:777444:commit:5895d5c137c335e6b473e9dcb9baf748851bbc5f"
        data-url="/rhuss/jolokia/commit/5895d5c137c335e6b473e9dcb9baf748851bbc5f/show_partial?partial=commit%2Ftimeline_marker&amp;since=1524139293"
        data-last-modified="Thu, 19 Apr 2018 12:01:33 GMT">

      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="d-none js-timeline-marker-form" data-remote="true" action="/rhuss/jolokia/notifications/mark?ids=313465302" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="YKLdT3S6S0Uxbmi9DNUfC2fsQRLWsD8JP8Hds6hufNIHB9ZGjjVGOlRVDjw52zsfr9pSkW6VNeZH0rMtfIPzhQ==" />
</form>  </div>

    </div>

    

      Please <a rel="nofollow" href="/login?return_to=https%3A%2F%2Fgithub.com%2Frhuss%2Fjolokia%2Fcommit%2F5895d5c137c335e6b473e9dcb9baf748851bbc5f">sign in</a> to comment.

  </div>


  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

      
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">&copy; 2018 <span title="0.59192s from unicorn-254775966-w2mp2">GitHub</span>, Inc.</li>
        <li class="mr-3"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://help.github.com/articles/github-security/" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon" href="https://github.com">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a href="https://blog.github.com" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    <script crossorigin="anonymous" integrity="sha512-2GVr5rsbbfKbHM6oRrri41+qJ2ltJBCqluASS29fj+9yHGLFmFhq0C64VMdL57UJ34G2+FXU+8FZhaAOnsCEhw==" type="application/javascript" src="https://assets-cdn.github.com/assets/compat-bb7abfb15ed4ffb0da9056d4c980fba5.js"></script>
    <script crossorigin="anonymous" integrity="sha512-HD3VGNUZdKcyhzxthfJME6V4ByRTPdCGqlqq7sPm8jFweQQjz00nAJzWMAR9GUDiP2yYWqSxM6JxNxc2J/4rGQ==" type="application/javascript" src="https://assets-cdn.github.com/assets/frameworks-2afbd5df19ed1f9aaf0a04c15e9d0b35.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-8KvfmvJlNQr+hV/43C8aXCx0Q9Etz+L2Ql9HH4LZUxVole8GkSvx4R373hGWBjivgW8LHLhfPfvQr55N3qpYfw==" type="application/javascript" src="https://assets-cdn.github.com/assets/github-5eb5a0a782f98fd2a446939b2f7cecf7.js"></script>
    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
  </div>
</div>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

<div id="hovercard-aria-description" class="sr-only">
  Press h to open a hovercard with more details.
</div>


  </body>
</html>

