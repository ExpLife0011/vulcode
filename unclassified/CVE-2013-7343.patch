From 236f6b55a5311d2491806481b5e1d47d339c3e33 Mon Sep 17 00:00:00 2001
From: Anssi Piirainen <api@iki.fi>
Date: Mon, 11 Nov 2013 16:20:48 +0200
Subject: [PATCH] Decode the URL before checking the callback param.

---
 lib/as/Flowplayer.as | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/lib/as/Flowplayer.as b/lib/as/Flowplayer.as
index b5ea3240..2eeab4d9 100644
--- a/lib/as/Flowplayer.as
+++ b/lib/as/Flowplayer.as
@@ -83,7 +83,8 @@ public class Flowplayer extends Sprite {
       stage.scaleMode = StageScaleMode.NO_SCALE;
       stage.align = StageAlign.TOP_LEFT;
 
-      if (this.loaderInfo.url.indexOf("callback=") > 0) throw new Error("Security error");
+      var swfUrl:String = decodeURIComponent(this.loaderInfo.url);
+      if (swfUrl.indexOf("callback=") > 0) throw new Error("Security error");
       conf = this.loaderInfo.parameters;
 
       // IE needs mouse / keyboard events
