From 4a07f949c171da6aa9a6e6c19421b0df16297180 Mon Sep 17 00:00:00 2001
From: sidler <sidler@mulchprod.de>
Date: Sun, 8 Jun 2014 21:46:49 +0200
Subject: [PATCH] BUG / SECURITY: module_search | portal-js -> fixed a possible
 xss injection, the search param is now included htmlencoded an no longer as
 plaintext

---
 module_search/templates/default/tpl/module_search/search_ajax.tpl     | 4 ++--
 .../templates/default/tpl/module_search/search_ajax_small.tpl         | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/module_search/templates/default/tpl/module_search/search_ajax.tpl b/module_search/templates/default/tpl/module_search/search_ajax.tpl
index 37decec25..13c4ee75e 100755
--- a/module_search/templates/default/tpl/module_search/search_ajax.tpl
+++ b/module_search/templates/default/tpl/module_search/search_ajax.tpl
@@ -36,8 +36,8 @@
 
                 $.post(post_target, post_data, function(data, textStatus) {
                     $('#searchResult').html("<ul></ul>");
-                    $("#spanSearchterm").html($(data).find("searchterm").text());
-                    $("#spanSearchamount").html($(data).find("nrofresults").text());
+                    $("#spanSearchterm").html($(data).find("searchterm").html());
+                    $("#spanSearchamount").html($(data).find("nrofresults").html());
                     $('#resultSetHeader').css("display", "block");
 
                     $(data).find("item").each(function() {
diff --git a/module_search/templates/default/tpl/module_search/search_ajax_small.tpl b/module_search/templates/default/tpl/module_search/search_ajax_small.tpl
index ea2966bf8..4070793cf 100755
--- a/module_search/templates/default/tpl/module_search/search_ajax_small.tpl
+++ b/module_search/templates/default/tpl/module_search/search_ajax_small.tpl
@@ -39,8 +39,8 @@
                 $.post(post_target, post_data, function(data, textStatus) {
 
 
-                    $("#spanSearchtermSmall").html($(data).find("searchterm").text());
-                    $("#spanSearchamountSmall").html($(data).find("nrofresults").text());
+                    $("#spanSearchtermSmall").html($(data).find("searchterm").html());
+                    $("#spanSearchamountSmall").html($(data).find("nrofresults").html());
 
                     $('#searchResultSmall').html($("#resultSetHeaderSmall").html());
                     $('#searchResultSmall').append($("<ul></ul>"));
